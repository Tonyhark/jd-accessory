/** vim: et:ts=4:sw=4:sts=4
 * @license RequireJS 2.1.9+ Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */

/* Zepto 1.1.2 - zepto detect event ajax form fx assets data selector ie - zeptojs.com/license */

// (c) 2010-2014 Thomas Fuchs

// Zepto.js may be freely distributed under the MIT license.

/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */

/*
 Standalone Deferred
 Copyright 2012 Otto VehvilÃ¤inen
 Released under MIT license

 This is a standalone implementation of the wonderful jQuery.Deferred API.
 The documentation here is only for quick reference, for complete api please
 see the great work of the original project:

 http://api.jquery.com/category/deferred-object/
 */

/*!
 * routie - a tiny hash router
 * v0.3.2
 * http://projects.jga.me/routie
 * copyright Greg Allen 2013
 * MIT License
*/

/**
 * @license RequireJS text 2.0.10 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

function FastClick(e,t){function n(e,t){return function(){return e.apply(t,arguments)}}var r;if(t=t||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=t.touchBoundary||10,this.layer=e,this.tapDelay=t.tapDelay||200,!FastClick.notNeeded(e)){for(var i=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],o=this,a=0,s=i.length;s>a;a++)o[i[a]]=n(o[i[a]],o);deviceIsAndroid&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,n,r){var i=Node.prototype.removeEventListener;"click"===t?i.call(e,t,n.hijacked||n,r):i.call(e,t,n,r)},e.addEventListener=function(t,n,r){var i=Node.prototype.addEventListener;"click"===t?i.call(e,t,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),r):i.call(e,t,n,r)}),"function"==typeof e.onclick&&(r=e.onclick,e.addEventListener("click",function(e){r(e)},!1),e.onclick=null)}}var requirejs,require,define;!function(global){function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,r){return t&&eachProp(t,function(t,i){(n||!hasProp(e,i))&&(r&&"string"!=typeof t?(e[i]||(e[i]={}),mixin(e[i],t,n,r)):e[i]=t)}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}function newContext(e){function t(e){var t,n;for(t=0;e[t];t+=1)if(n=e[t],"."===n)e.splice(t,1),t-=1;else if(".."===n){if(1===t&&(".."===e[2]||".."===e[0]))break;t>0&&(e.splice(t-1,2),t-=2)}}function n(e,n,r){var i,o,a,s,c,u,l,f,d,p,h,m=n&&n.split("/"),g=m,v=E.map,y=v&&v["*"];if(e&&"."===e.charAt(0)&&(n?(g=getOwn(E.pkgs,n)?m=[n]:m.slice(0,m.length-1),e=g.concat(e.split("/")),t(e),o=getOwn(E.pkgs,i=e[0]),e=e.join("/"),o&&e===i+"/"+o.main&&(e=i)):0===e.indexOf("./")&&(e=e.substring(2))),r&&v&&(m||y)){for(s=e.split("/"),c=s.length;c>0;c-=1){if(l=s.slice(0,c).join("/"),m)for(u=m.length;u>0;u-=1)if(a=getOwn(v,m.slice(0,u).join("/")),a&&(a=getOwn(a,l))){f=a,d=c;break}if(f)break;!p&&y&&getOwn(y,l)&&(p=getOwn(y,l),h=c)}!f&&p&&(f=p,d=h),f&&(s.splice(0,d,f),e=s.join("/"))}return e}function r(e){isBrowser&&each(scripts(),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===w.contextName?(t.parentNode.removeChild(t),!0):void 0})}function i(e){var t=getOwn(E.paths,e);return t&&isArray(t)&&t.length>1?(t.shift(),w.require.undef(e),w.require([e]),!0):void 0}function o(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function a(e,t,r,i){var a,s,c,u,l=null,f=t?t.name:null,d=e,p=!0,h="";return e||(p=!1,e="_@r"+(O+=1)),u=o(e),l=u[0],e=u[1],l&&(l=n(l,f,i),s=getOwn(j,l)),e&&(l?h=s&&s.normalize?s.normalize(e,function(e){return n(e,f,i)}):n(e,f,i):(h=n(e,f,i),u=o(h),l=u[0],h=u[1],r=!0,a=w.nameToUrl(h))),c=!l||s||r?"":"_unnormalized"+(A+=1),{prefix:l,name:h,parentMap:t,unnormalized:!!c,url:a,originalName:d,isDefine:p,id:(l?l+"!"+h:h)+c}}function s(e){var t=e.id,n=getOwn(C,t);return n||(n=C[t]=new w.Module(e)),n}function c(e,t,n){var r=e.id,i=getOwn(C,r);!hasProp(j,r)||i&&!i.defineEmitComplete?(i=s(e),i.error&&"error"===t?n(i.error):i.on(t,n)):"defined"===t&&n(j[r])}function u(e,t){var n=e.requireModules,r=!1;t?t(e):(each(n,function(t){var n=getOwn(C,t);n&&(n.error=e,n.events.error&&(r=!0,n.emit("error",e)))}),r||req.onError(e))}function l(){globalDefQueue.length&&(apsp.apply(S,[S.length,0].concat(globalDefQueue)),globalDefQueue=[])}function f(e){delete C[e],delete T[e]}function d(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,each(e.depMaps,function(r,i){var o=r.id,a=getOwn(C,o);!a||e.depMatched[i]||n[o]||(getOwn(t,o)?(e.defineDep(i,j[o]),e.check()):d(a,t,n))}),n[r]=!0)}function p(){var e,t,n=1e3*E.waitSeconds,o=n&&w.startTime+n<(new Date).getTime(),a=[],s=[],c=!1,l=!0;if(!y){if(y=!0,eachProp(T,function(e){var n=e.map,u=n.id;if(e.enabled&&(n.isDefine||s.push(e),!e.error))if(!e.inited&&o)i(u)?(t=!0,c=!0):(a.push(u),r(u));else if(!e.inited&&e.fetched&&n.isDefine&&(c=!0,!n.prefix))return l=!1}),o&&a.length)return e=makeError("timeout","Load timeout for modules: "+a,null,a),e.contextName=w.contextName,u(e);l&&each(s,function(e){d(e,{},{})}),o&&!t||!c||!isBrowser&&!isWebWorker||k||(k=setTimeout(function(){k=0,p()},50)),y=!1}}function h(e){hasProp(j,e[0])||s(a(e[0],null,!0)).init(e[1],e[2])}function m(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function g(e){var t=e.currentTarget||e.srcElement;return m(t,w.onScriptLoad,"load","onreadystatechange"),m(t,w.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function v(){var e;for(l();S.length;){if(e=S.shift(),null===e[0])return u(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));h(e)}}var y,b,w,x,k,E={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},C={},T={},_={},S=[],j={},P={},O=1,A=1;return x={require:function(e){return e.require?e.require:e.require=w.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?e.exports:e.exports=j[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){var t,n=getOwn(E.pkgs,e.map.id);return t=n?getOwn(E.config,e.map.id+"/"+n.main):getOwn(E.config,e.map.id),t||{}},exports:j[e.map.id]}}},b=function(e){this.events=getOwn(_,e.id)||{},this.map=e,this.shim=getOwn(E.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},b.prototype={init:function(e,t,n,r){r=r||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,w.startTime=(new Date).getTime();var e=this.map;return this.shim?void w.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;P[e]||(P[e]=!0,w.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,r=this.depExports,i=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{i=w.execCb(n,o,r,i)}catch(a){e=a}else i=w.execCb(n,o,r,i);if(this.map.isDefine&&(t=this.module,t&&void 0!==t.exports&&t.exports!==this.exports?i=t.exports:void 0===i&&this.usingExports&&(i=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",u(this.error=e)}else i=o;this.exports=i,this.map.isDefine&&!this.ignore&&(j[n]=i,req.onResourceLoad&&req.onResourceLoad(w,this.map,this.depMaps)),f(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,r=a(e.prefix);this.depMaps.push(r),c(r,"defined",bind(this,function(r){var i,o,l,d=this.map.name,p=this.map.parentMap?this.map.parentMap.name:null,h=w.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(r.normalize&&(d=r.normalize(d,function(e){return n(e,p,!0)})||""),o=a(e.prefix+"!"+d,this.map.parentMap),c(o,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),l=getOwn(C,o.id),void(l&&(this.depMaps.push(o),this.events.error&&l.on("error",bind(this,function(e){this.emit("error",e)})),l.enable()))):(i=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(C,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&f(e.map.id)}),u(e)}),i.fromText=bind(this,function(n,r){var o=e.name,c=a(o),l=useInteractive;r&&(n=r),l&&(useInteractive=!1),s(c),hasProp(E.config,t)&&(E.config[o]=E.config[t]);try{req.exec(n)}catch(f){return u(makeError("fromtexteval","fromText eval for "+t+" failed: "+f,f,[t]))}l&&(useInteractive=!0),this.depMaps.push(c),w.completeLoad(o),h([o],i)}),void r.load(e.name,h,i,E))})),w.enable(r,this),this.pluginMaps[r.id]=r},enable:function(){T[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,r,i;if("string"==typeof e){if(e=a(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,i=getOwn(x,e.id))return void(this.depExports[t]=i(this));this.depCount+=1,c(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&c(e,"error",bind(this,this.errback))}n=e.id,r=C[n],hasProp(x,n)||!r||r.enabled||w.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(C,e.id);t&&!t.enabled&&w.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},w={config:E,contextName:e,registry:C,defined:j,urlFetched:P,defQueue:S,Module:b,makeModuleMap:a,nextTick:req.nextTick,onError:u,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=E.pkgs,n=E.shim,r={paths:!0,config:!0,map:!0};eachProp(e,function(e,t){r[t]?"map"===t?(E.map||(E.map={}),mixin(E[t],e,!0,!0)):mixin(E[t],e,!0):E[t]=e}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=w.makeShimExports(e)),n[t]=e}),E.shim=n),e.packages&&(each(e.packages,function(e){var n;e="string"==typeof e?{name:e}:e,n=e.location,t[e.name]={name:e.name,location:n||e.name,main:(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),E.pkgs=t),eachProp(C,function(e,t){e.inited||e.map.unnormalized||(e.map=a(t))}),(e.deps||e.callback)&&w.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,i){function o(n,r,c){var l,f,d;return i.enableBuildCallback&&r&&isFunction(r)&&(r.__requireJsBuild=!0),"string"==typeof n?isFunction(r)?u(makeError("requireargs","Invalid require call"),c):t&&hasProp(x,n)?x[n](C[t.id]):req.get?req.get(w,n,t,o):(f=a(n,t,!1,!0),l=f.id,hasProp(j,l)?j[l]:u(makeError("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(v(),w.nextTick(function(){v(),d=s(a(null,t)),d.skipMap=i.skipMap,d.init(n,r,c,{enabled:!0}),p()}),o)}return i=i||{},mixin(o,{isBrowser:isBrowser,toUrl:function(e){var r,i=e.lastIndexOf("."),o=e.split("/")[0],a="."===o||".."===o;return-1!==i&&(!a||i>1)&&(r=e.substring(i,e.length),e=e.substring(0,i)),w.nameToUrl(n(e,t&&t.id,!0),r,!0)},defined:function(e){return hasProp(j,a(e,t,!1,!0).id)},specified:function(e){return e=a(e,t,!1,!0).id,hasProp(j,e)||hasProp(C,e)}}),t||(o.undef=function(e){l();var n=a(e,t,!0),i=getOwn(C,e);r(e),delete j[e],delete P[n.url],delete _[e],eachReverse(S,function(t,n){t[0]===e&&S.splice(n,1)}),i&&(i.events.defined&&(_[e]=i.events),f(e))}),o},enable:function(e){var t=getOwn(C,e.id);t&&s(e).enable()},completeLoad:function(e){var t,n,r,o=getOwn(E.shim,e)||{},a=o.exports;for(l();S.length;){if(n=S.shift(),null===n[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);h(n)}if(r=getOwn(C,e),!t&&!hasProp(j,e)&&r&&!r.inited){if(!(!E.enforceDefine||a&&getGlobal(a)))return i(e)?void 0:u(makeError("nodefine","No define call for "+e,null,[e]));h([e,o.deps||[],o.exportsFn])}p()},nameToUrl:function(e,t,n){var r,i,o,a,s,c,u,l,f;if(req.jsExtRegExp.test(e))l=e+(t||"");else{for(r=E.paths,i=E.pkgs,s=e.split("/"),c=s.length;c>0;c-=1){if(u=s.slice(0,c).join("/"),o=getOwn(i,u),f=getOwn(r,u)){isArray(f)&&(f=f[0]),s.splice(0,c,f);break}if(o){a=e===o.name?o.location+"/"+o.main:o.location,s.splice(0,c,a);break}}l=s.join("/"),l+=t||(/^data\:|\?/.test(l)||n?"":".js"),l=("/"===l.charAt(0)||l.match(/^[\w\+\.\-]+:/)?"":E.baseUrl)+l}return E.urlArgs?l+((-1===l.indexOf("?")?"?":"&")+E.urlArgs):l},load:function(e,t){req.load(w,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=g(e);w.completeLoad(t.id)}},onScriptError:function(e){var t=g(e);return i(t.id)?void 0:u(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},w.require=w.makeRequire(),w}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){return"interactive"===e.readyState?interactiveScript=e:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.9+",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,n,r){var i,o,a=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=n,n=r):e=[]),o&&o.context&&(a=o.context),i=getOwn(contexts,a),i||(i=contexts[a]=req.s.newContext(a)),o&&i.configure(o),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},req.load=function(e,t,n){var r,i=e&&e.config||{};if(isBrowser)return r=req.createNode(i,t,n),r.setAttribute("data-requirecontext",e.contextName),r.setAttribute("data-requiremodule",t),!r.attachEvent||r.attachEvent.toString&&r.attachEvent.toString().indexOf("[native code")<0||isOpera?(r.addEventListener("load",e.onScriptLoad,!1),r.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,r.attachEvent("onreadystatechange",e.onScriptLoad)),r.src=n,currentlyAddingScript=r,baseElement?head.insertBefore(r,baseElement):head.appendChild(r),currentlyAddingScript=null,r;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(o){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,o,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){return head||(head=e.parentNode),dataMain=e.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(e,t,n){var r,i;"string"!=typeof e&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript(),r&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")])),(i?i.defQueue:globalDefQueue).push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),define("require.js",function(){});var Zepto=function(){function e(e){return null==e?String(e):Z[W.call(e)]||"object"}function t(t){return"function"==e(t)}function n(e){return null!=e&&e==e.window}function r(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function i(t){return"object"==e(t)}function o(e){return i(e)&&!n(e)&&Object.getPrototypeOf(e)==Object.prototype}function a(e){return e instanceof Array}function s(e){return"number"==typeof e.length}function c(e){return A.call(e,function(e){return null!=e})}function u(e){return e.length>0?C.fn.concat.apply([],e):e}function l(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function f(e){return e in I?I[e]:I[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function d(e,t){return"number"!=typeof t||q[l(e)]?t:t+"px"}function p(e){var t,n;return N[e]||(t=M.createElement(e),M.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),N[e]=n),N[e]}function h(e){return"children"in e?O.call(e.children):C.map(e.childNodes,function(e){return 1==e.nodeType?e:void 0})}function m(e,t,n){for(E in t)n&&(o(t[E])||a(t[E]))?(o(t[E])&&!o(e[E])&&(e[E]={}),a(t[E])&&!a(e[E])&&(e[E]=[]),m(e[E],t[E],n)):t[E]!==k&&(e[E]=t[E])}function g(e,t){return null==t?C(e):C(e).filter(t)}function v(e,n,r,i){return t(n)?n.call(e,r,i):n}function y(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function b(e,t){var n=e.className,r=n&&n.baseVal!==k;return t===k?r?n.baseVal:n:void(r?n.baseVal=t:e.className=t)}function w(e){var t;try{return e?"true"==e||("false"==e?!1:"null"==e?null:/^0/.test(e)||isNaN(t=Number(e))?/^[\[\{]/.test(e)?C.parseJSON(e):e:t):e}catch(n){return e}}function x(e,t){t(e);for(var n in e.childNodes)x(e.childNodes[n],t)}var k,E,C,T,_,S,j=/MSIE/.test(navigator.userAgent),P=[],O=P.slice,A=P.filter,M=window.document,N={},I={},q={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},L=/^\s*<(\w+|!)[^>]*>/,D=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,R=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,F=/^(?:body|html)$/i,U=/([A-Z])/g,B=["val","css","html","text","data","width","height","offset"],$=["after","prepend","before","append"],z=M.createElement("table"),H=M.createElement("tr"),X={tr:M.createElement("tbody"),tbody:z,thead:z,tfoot:z,td:H,th:H,"*":M.createElement("div")},Y=/complete|loaded|interactive/,J=/^[\w-]*$/,Z={},W=Z.toString,Q={},G=M.createElement("div"),V={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"};return Q.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var r,i=e.parentNode,o=!i;return o&&(i=G).appendChild(e),r=~Q.qsa(i,t).indexOf(e),o&&G.removeChild(e),r},_=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},S=function(e){return A.call(e,function(t,n){return e.indexOf(t)==n})},Q.fragment=function(e,t,n){var r,i,a;return D.test(e)&&(r=C(M.createElement(RegExp.$1))),r||(e.replace&&(e=e.replace(R,"<$1></$2>")),t===k&&(t=L.test(e)&&RegExp.$1),t in X||(t="*"),a=X[t],a.innerHTML=""+e,r=C.each(O.call(a.childNodes),function(){a.removeChild(this)})),o(n)&&(i=C(r),C.each(n,function(e,t){B.indexOf(e)>-1?i[e](t):i.attr(e,t)})),r},Q.Z=function(e,t){return e=e||[],e.__proto__=C.fn,e.selector=t||"",e},Q.isZ=function(e){return e instanceof Q.Z},Q.init=function(e,n){var r;if(!e)return Q.Z();if("string"==typeof e)if(e=e.trim(),"<"==e[0]&&L.test(e))r=Q.fragment(e,RegExp.$1,n),e=null;else{if(n!==k)return C(n).find(e);r=Q.qsa(M,e)}else{if(t(e))return C(M).ready(e);if(Q.isZ(e))return e;if(a(e))r=c(e);else if(i(e))r=[e],e=null;else if(L.test(e))r=Q.fragment(e.trim(),RegExp.$1,n),e=null;else{if(n!==k)return C(n).find(e);r=Q.qsa(M,e)}}return Q.Z(r,e)},C=function(e,t){return Q.init(e,t)},C.extend=function(e){var t,n=O.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach(function(n){m(e,n,t)}),e},Q.qsa=function(e,t){var n,i="#"==t[0],o=!i&&"."==t[0],a=i||o?t.slice(1):t,s=J.test(a);return r(e)&&s&&i?(n=e.getElementById(a))?[n]:[]:1!==e.nodeType&&9!==e.nodeType?[]:O.call(s&&!i?o?e.getElementsByClassName(a):e.getElementsByTagName(t):e.querySelectorAll(t))},C.contains=function(e,t){return e!==t&&e.contains(t)},C.type=e,C.isFunction=t,C.isWindow=n,C.isArray=a,C.isPlainObject=o,C.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},C.inArray=function(e,t,n){return P.indexOf.call(t,e,n)},C.camelCase=_,C.trim=function(e){return null==e?"":String.prototype.trim.call(e)},C.uuid=0,C.support={},C.expr={},C.map=function(e,t){var n,r,i,o=[];if(s(e))for(r=0;r<e.length;r++)n=t(e[r],r),null!=n&&o.push(n);else for(i in e)n=t(e[i],i),null!=n&&o.push(n);return u(o)},C.each=function(e,t){var n,r;if(s(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(r in e)if(t.call(e[r],r,e[r])===!1)return e;return e},C.grep=function(e,t){return A.call(e,t)},window.JSON&&(C.parseJSON=JSON.parse),C.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Z["[object "+t+"]"]=t.toLowerCase()}),C.fn={forEach:P.forEach,reduce:P.reduce,push:P.push,sort:P.sort,indexOf:P.indexOf,concat:P.concat,map:function(e){return C(C.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return C(O.apply(this,arguments))},ready:function(e){return Y.test(M.readyState)&&M.body?e(C):M.addEventListener("DOMContentLoaded",function(){e(C)},!1),this},get:function(e){return e===k?O.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return P.every.call(this,function(t,n){return e.call(t,n,t)!==!1}),this},filter:function(e){return t(e)?this.not(this.not(e)):C(A.call(this,function(t){return Q.matches(t,e)}))},add:function(e,t){return C(S(this.concat(C(e,t))))},is:function(e){return this.length>0&&Q.matches(this[0],e)},not:function(e){var n=[];if(t(e)&&e.call!==k)this.each(function(t){e.call(this,t)||n.push(this)});else{var r="string"==typeof e?this.filter(e):s(e)&&t(e.item)?O.call(e):C(e);this.forEach(function(e){r.indexOf(e)<0&&n.push(e)})}return C(n)},has:function(e){return this.filter(function(){return i(e)?C.contains(this,e):C(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!i(e)?e:C(e)},last:function(){var e=this[this.length-1];return e&&!i(e)?e:C(e)},find:function(e){var t,n=this;return t="object"==typeof e?C(e).filter(function(){var e=this;return P.some.call(n,function(t){return C.contains(t,e)})}):1==this.length?C(Q.qsa(this[0],e)):this.map(function(){return Q.qsa(this,e)})},closest:function(e,t){var n=this[0],i=!1;for("object"==typeof e&&(i=C(e));n&&!(i?i.indexOf(n)>=0:Q.matches(n,e));)n=n!==t&&!r(n)&&n.parentNode;return C(n)},parents:function(e){for(var t=[],n=this;n.length>0;)n=C.map(n,function(e){return(e=e.parentNode)&&!r(e)&&t.indexOf(e)<0?(t.push(e),e):void 0});return g(t,e)},parent:function(e){return g(S(this.pluck("parentNode")),e)},children:function(e){return g(this.map(function(){return h(this)}),e)},contents:function(){return this.map(function(){return O.call(this.childNodes)})},siblings:function(e){return g(this.map(function(e,t){return A.call(h(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return C.map(this,function(t){return t[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=p(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var n=t(e);if(this[0]&&!n)var r=C(e).get(0),i=r.parentNode||this.length>1;return this.each(function(t){C(this).wrapAll(n?e.call(this,t):i?r.cloneNode(!0):r)})},wrapAll:function(e){if(this[0]){C(this[0]).before(e=C(e));for(var t;(t=e.children()).length;)e=t.first();C(e).append(this)}return this},wrapInner:function(e){var n=t(e);return this.each(function(t){var r=C(this),i=r.contents(),o=n?e.call(this,t):e;i.length?i.wrapAll(o):r.append(o)})},unwrap:function(){return this.parent().each(function(){C(this).replaceWith(C(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=C(this);(e===k?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(e){return C(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return C(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0===arguments.length?this.length>0?this[0].innerHTML:null:this.each(function(t){var n=this.innerHTML;C(this).empty().append(v(this,e,t,n))})},text:function(e){return 0===arguments.length?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=e===k?"":""+e})},attr:function(e,t){var n;return"string"==typeof e&&t===k?0==this.length||1!==this[0].nodeType?k:"value"==e&&"INPUT"==this[0].nodeName?this.val():!(n=this[0].getAttribute(e))&&e in this[0]?this[0][e]:n:this.each(function(n){if(1===this.nodeType)if(i(e))for(E in e)y(this,E,e[E]);else y(this,e,v(this,t,n,this.getAttribute(e)))})},removeAttr:function(e){return this.each(function(){1===this.nodeType&&y(this,e)})},prop:function(e,t){return e=V[e]||e,t===k?this[0]&&this[0][e]:this.each(function(n){this[e]=v(this,t,n,this[e])})},data:function(e,t){var n=this.attr("data-"+e.replace(U,"-$1").toLowerCase(),t);return null!==n?w(n):k},val:function(e){return 0===arguments.length?this[0]&&(this[0].multiple?C(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(t){this.value=v(this,e,t,this.value)})},offset:function(e){if(e)return this.each(function(t){var n=C(this),r=v(this,e,t,n.offset()),i=n.offsetParent().offset(),o={top:r.top-i.top,left:r.left-i.left};"static"==n.css("position")&&(o.position="relative"),n.css(o)});if(0==this.length)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(t,n){if(j)if("string"==typeof t&&0==t.indexOf("-webkit-"))t="-ms-"+t.substring(8);else if("object"==typeof t){var r={};for(var i in t)0==i.indexOf("-webkit-")?r["-ms-"+i.substring(8)]=t[i]:r[i]=t[i];t=r}if(arguments.length<2){var o=this[0],s=getComputedStyle(o,"");if(!o)return;if("string"==typeof t)return o.style[_(t)]||s.getPropertyValue(t);if(a(t)){var c={};return C.each(a(t)?t:[t],function(e,t){c[t]=o.style[_(t)]||s.getPropertyValue(t)}),c}}var u="";if("string"==e(t))n||0===n?u=l(t)+":"+d(t,n):this.each(function(){this.style.removeProperty(l(t))});else for(E in t)t[E]||0===t[E]?u+=l(E)+":"+d(E,t[E])+";":this.each(function(){this.style.removeProperty(l(E))});return this.each(function(){this.style.cssText+=";"+u})},index:function(e){return e?this.indexOf(C(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return e?P.some.call(this,function(e){return this.test(b(e))},f(e)):!1},addClass:function(e){return e?this.each(function(t){T=[];var n=b(this),r=v(this,e,t,n);r.split(/\s+/g).forEach(function(e){C(this).hasClass(e)||T.push(e)},this),T.length&&b(this,n+(n?" ":"")+T.join(" "))}):this},removeClass:function(e){return this.each(function(t){return e===k?b(this,""):(T=b(this),v(this,e,t,T).split(/\s+/g).forEach(function(e){T=T.replace(f(e)," ")}),void b(this,T.trim()))})},toggleClass:function(e,t){return e?this.each(function(n){var r=C(this),i=v(this,e,n,b(this));i.split(/\s+/g).forEach(function(e){(t===k?!r.hasClass(e):t)?r.addClass(e):r.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return e===k?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return e===k?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),n=this.offset(),r=F.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(C(e).css("margin-top"))||0,n.left-=parseFloat(C(e).css("margin-left"))||0,r.top+=parseFloat(C(t[0]).css("border-top-width"))||0,r.left+=parseFloat(C(t[0]).css("border-left-width"))||0,{top:n.top-r.top,left:n.left-r.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||M.body;e&&!F.test(e.nodeName)&&"static"==C(e).css("position");)e=e.offsetParent;return e})}},C.fn.detach=C.fn.remove,["width","height"].forEach(function(e){var t=e.replace(/./,function(e){return e[0].toUpperCase()});C.fn[e]=function(i){var o,a=this[0];return i===k?n(a)?a["inner"+t]:r(a)?a.documentElement["scroll"+t]:(o=this.offset())&&o[e]:this.each(function(t){a=C(this),a.css(e,v(this,i,t,a[e]()))})}}),$.forEach(function(t,n){var r=n%2;C.fn[t]=function(){var t,i,o=C.map(arguments,function(n){return t=e(n),"object"==t||"array"==t||null==n?n:Q.fragment(n)}),a=this.length>1;return o.length<1?this:this.each(function(e,t){i=r?t:t.parentNode,t=0==n?t.nextSibling:1==n?t.firstChild:2==n?t:null,o.forEach(function(e){if(a)e=e.cloneNode(!0);else if(!i)return C(e).remove();x(i.insertBefore(e,t),function(e){null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||window.eval.call(window,e.innerHTML)
})})})},C.fn[r?t+"To":"insert"+(n?"Before":"After")]=function(e){return C(e)[t](this),this}}),Q.Z.prototype=C.fn,Q.uniq=S,Q.deserializeValue=w,C.zepto=Q,C}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(e){function t(e){var t=this.os={},n=this.browser={},r=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),i=e.match(/(Android);?[\s\/]+([\d.]+)?/),o=e.match(/(iPad).*OS\s([\d_]+)/),a=e.match(/(iPod)(.*OS\s([\d_]+))?/),s=!o&&e.match(/(iPhone\sOS)\s([\d_]+)/),c=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),u=c&&e.match(/TouchPad/),l=e.match(/Kindle\/([\d.]+)/),f=e.match(/Silk\/([\d._]+)/),d=e.match(/(BlackBerry).*Version\/([\d.]+)/),p=e.match(/(BB10).*Version\/([\d.]+)/),h=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),m=e.match(/PlayBook/),g=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),v=e.match(/Firefox\/([\d.]+)/),y=e.match(/MSIE ([\d.]+)/),b=r&&e.match(/Mobile\//)&&!g,w=e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!g,y=e.match(/MSIE\s([\d.]+)/);(n.webkit=!!r)&&(n.version=r[1]),i&&(t.android=!0,t.version=i[2]),s&&!a&&(t.ios=t.iphone=!0,t.version=s[2].replace(/_/g,".")),o&&(t.ios=t.ipad=!0,t.version=o[2].replace(/_/g,".")),a&&(t.ios=t.ipod=!0,t.version=a[3]?a[3].replace(/_/g,"."):null),c&&(t.webos=!0,t.version=c[2]),u&&(t.touchpad=!0),d&&(t.blackberry=!0,t.version=d[2]),p&&(t.bb10=!0,t.version=p[2]),h&&(t.rimtabletos=!0,t.version=h[2]),m&&(n.playbook=!0),l&&(t.kindle=!0,t.version=l[1]),f&&(n.silk=!0,n.version=f[1]),!f&&t.android&&e.match(/Kindle Fire/)&&(n.silk=!0),g&&(n.chrome=!0,n.version=g[1]),v&&(n.firefox=!0,n.version=v[1]),y&&(n.ie=!0,n.version=y[1]),b&&(e.match(/Safari/)||t.ios)&&(n.safari=!0),w&&(n.webview=!0),y&&(n.ie=!0,n.version=y[1]),t.tablet=!!(o||m||i&&!e.match(/Mobile/)||v&&e.match(/Tablet/)||y&&!e.match(/Phone/)&&e.match(/Touch/)),t.phone=!(t.tablet||t.ipod||!(i||s||c||d||p||g&&e.match(/Android/)||g&&e.match(/CriOS\/([\d.]+)/)||v&&e.match(/Mobile/)||y&&e.match(/Touch/)))}t.call(e,navigator.userAgent),e.__detect=t}(Zepto),function(e){function t(e){return e._zid||(e._zid=d++)}function n(e,n,o,a){if(n=r(n),n.ns)var s=i(n.ns);return(g[t(e)]||[]).filter(function(e){return!(!e||n.e&&e.e!=n.e||n.ns&&!s.test(e.ns)||o&&t(e.fn)!==t(o)||a&&e.sel!=a)})}function r(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function i(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function o(e,t){return e.del&&!y&&e.e in b||!!t}function a(e){return w[e]||y&&b[e]||e}function s(n,i,s,c,l,d,p){var h=t(n),m=g[h]||(g[h]=[]);i.split(/\s/).forEach(function(t){if("ready"==t)return e(document).ready(s);var i=r(t);i.fn=s,i.sel=l,i.e in w&&(s=function(t){var n=t.relatedTarget;return!n||n!==this&&!e.contains(this,n)?i.fn.apply(this,arguments):void 0}),i.del=d;var h=d||s;i.proxy=function(e){if(e=u(e),!e.isImmediatePropagationStopped()){e.data=c;var t=h.apply(n,e._args==f?[e]:[e].concat(e._args));return t===!1&&(e.preventDefault(),e.stopPropagation()),t}},i.i=m.length,m.push(i),"addEventListener"in n&&n.addEventListener(a(i.e),i.proxy,o(i,p))})}function c(e,r,i,s,c){var u=t(e);(r||"").split(/\s/).forEach(function(t){n(e,t,i,s).forEach(function(t){delete g[u][t.i],"removeEventListener"in e&&e.removeEventListener(a(t.e),t.proxy,o(t,c))})})}function u(t,n){return(n||!t.isDefaultPrevented)&&(n||(n=t),e.each(C,function(e,r){var i=n[e];t[e]=function(){return this[r]=x,i&&i.apply(n,arguments)},t[r]=k}),(n.defaultPrevented!==f?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())&&(t.isDefaultPrevented=x)),t}function l(e){var t,n={originalEvent:e};for(t in e)E.test(t)||e[t]===f||(n[t]=e[t]);return u(n,e)}var f,d=(e.zepto.qsa,1),p=Array.prototype.slice,h=e.isFunction,m=function(e){return"string"==typeof e},g={},v={},y="onfocusin"in window,b={focus:"focusin",blur:"focusout"},w={mouseenter:"mouseover",mouseleave:"mouseout",touchstart:window.navigator.msPointerEnabled?"MSPointerDown":"touchstart",touchmove:window.navigator.msPointerEnabled?"MSPointerMove":"touchmove",touchend:window.navigator.msPointerEnabled?"MSPointerCancel":"touchend",touchcancel:window.navigator.msPointerEnabled?"MSPointerCancel":"touchcancel"};v.click=v.mousedown=v.mouseup=v.mousemove="MouseEvents",e.event={add:s,remove:c},e.proxy=function(n,r){if(h(n)){var i=function(){return n.apply(r,arguments)};return i._zid=t(n),i}if(m(r))return e.proxy(n[r],n);throw new TypeError("expected function")},e.fn.bind=function(e,t,n){return this.on(e,t,n)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,n,r){return this.on(e,t,n,r,1)};var x=function(){return!0},k=function(){return!1},E=/^([A-Z]|returnValue$|layer[XY]$)/,C={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,n,r,i,o){var a,u,d=this;return t&&!m(t)?(e.each(t,function(e,t){d.on(e,n,r,t,o)}),d):(m(n)||h(i)||i===!1||(i=r,r=n,n=f),(h(r)||r===!1)&&(i=r,r=f),i===!1&&(i=k),d.each(function(f,d){o&&(a=function(e){return c(d,e.type,i),i.apply(this,arguments)}),n&&(u=function(t){var r,o=e(t.target).closest(n,d).get(0);return o&&o!==d?(r=e.extend(l(t),{currentTarget:o,liveFired:d}),(a||i).apply(o,[r].concat(p.call(arguments,1)))):void 0}),s(d,t,i,r,n,u||a)}))},e.fn.off=function(t,n,r){var i=this;return t&&!m(t)?(e.each(t,function(e,t){i.off(e,n,t)}),i):(m(n)||h(r)||r===!1||(r=n,n=f),r===!1&&(r=k),i.each(function(){c(this,t,r,n)}))},e.fn.trigger=function(t,n){return t=m(t)||e.isPlainObject(t)?e.Event(t):u(t),t._args=n,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)})},e.fn.triggerHandler=function(t,r){var i,o;return this.each(function(a,s){i=l(m(t)?e.Event(t):t),i._args=r,i.target=s,e.each(n(s,t.type||t),function(e,t){return o=t.proxy(i),i.isImmediatePropagationStopped()?!1:void 0})}),o},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)}}),["focus","blur"].forEach(function(t){e.fn[t]=function(e){return e?this.bind(t,e):this.each(function(){try{this[t]()}catch(e){}}),this}}),e.Event=function(e,t){m(e)||(t=e,e=t.type);var n=document.createEvent(v[e]||"Events"),r=!0;if(t)for(var i in t)"bubbles"==i?r=!!t[i]:n[i]=t[i];return n.initEvent(e,r,!0),u(n)}}(Zepto),function(e){function t(t,n,r){var i=e.Event(n);return e(t).trigger(i,r),!i.isDefaultPrevented()}function n(e,n,r,i){return e.global?t(n||y,r,i):void 0}function r(t){t.global&&0===e.active++&&n(t,null,"ajaxStart")}function i(t){t.global&&!--e.active&&n(t,null,"ajaxStop")}function o(e,t){var r=t.context;return t.beforeSend.call(r,e,t)===!1||n(t,r,"ajaxBeforeSend",[e,t])===!1?!1:void n(t,r,"ajaxSend",[e,t])}function a(e,t,r,i){var o=r.context,a="success";r.success.call(o,e,a,t),i&&i.resolveWith(o,[e,a,t]),n(r,o,"ajaxSuccess",[t,r,e]),c(a,t,r)}function s(e,t,r,i,o){var a=i.context;i.error.call(a,r,t,e),o&&o.rejectWith(a,[r,t,e]),n(i,a,"ajaxError",[r,i,e||t]),c(t,r,i)}function c(e,t,r){var o=r.context;r.complete.call(o,t,e),n(r,o,"ajaxComplete",[t,r]),i(r)}function u(){}function l(e){return e&&(e=e.split(";",2)[0]),e&&(e==E?"html":e==k?"json":w.test(e)?"script":x.test(e)&&"xml")||"text"}function f(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function d(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()||(t.url=f(t.url,t.data),t.data=void 0)}function p(t,n,r,i){var o=!e.isFunction(n);return{url:t,charset:o&&n&&n.charset?n.charset:void 0,data:o?n:void 0,success:o?e.isFunction(r)?r:void 0:n,dataType:o?i||r:r}}function h(t,n,r,i){var o,a=e.isArray(n),s=e.isPlainObject(n);e.each(n,function(n,c){o=e.type(c),i&&(n=r?i:i+"["+(s||"object"==o||"array"==o?n:"")+"]"),!i&&a?t.add(c.name,c.value):"array"==o||!r&&"object"==o?h(t,c,r,n):t.add(n,c)})}var m,g,v=0,y=window.document,b=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,w=/^(?:text|application)\/javascript/i,x=/^(?:text|application)\/xml/i,k="application/json",E="text/html",C=/^\s*$/;e.active=0,e.ajaxJSONP=function(t,n){if(!("type"in t))return e.ajax(t);var r,i,c=t.jsonpCallback,u=(e.isFunction(c)?c():c)||"jsonp"+ ++v,l=y.createElement("script"),f=window[u],d=function(t){e(l).triggerHandler("error",t||"abort")},p={abort:d};return n&&n.promise(p),e(l).on("load error",function(o,c){clearTimeout(i),e(l).off().remove(),"error"!=o.type&&r?a(r[0],p,t,n):s(null,c||"error",p,t,n),window[u]=f,r&&e.isFunction(f)&&f(r[0]),f=r=void 0}),o(p,t)===!1?(d("abort"),p):(window[u]=window[u]||function(){r=arguments},l.src=t.url.replace(/=\?/,"="+u),y.head.appendChild(l),t.timeout>0&&(i=setTimeout(function(){d("timeout")},t.timeout)),p)},e.ajaxSettings={type:"GET",beforeSend:u,success:u,error:u,complete:u,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:k,xml:"application/xml, text/xml",html:E,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},e.ajax=function(t){var n=e.extend({},t||{}),i=e.Deferred&&e.Deferred();for(m in e.ajaxSettings)void 0===n[m]&&(n[m]=e.ajaxSettings[m]);r(n),n.crossDomain||(n.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(n.url)&&RegExp.$2!=window.location.host),n.url||(n.url=window.location.toString()),d(n),n.cache===!1&&(n.url=f(n.url,"_="+Date.now()));var c=n.dataType,p=/=\?/.test(n.url);if("jsonp"==c||p){if(!p){n.url=f(n.url,n.jsonp?n.jsonp+"=?":n.jsonp===!1?"":n.url.indexOf("callback=")>-1?"":null==n.success||n.success==u?"":"callback=?");var h=n.url.match(new RegExp((n.jsonp?n.jsonp:"callback")+"=(\\w+)","i"));null!=h&&h.length>=2&&(n.jsonpCallback=h[1])}return e.ajaxJSONP(n,i)}var v,y=n.accepts[c],b={},w=function(e,t){b[e.toLowerCase()]=[e,t]},x=/^([\w-]+:)\/\//.test(n.url)?RegExp.$1:window.location.protocol,k=n.xhr(),E=k.setRequestHeader;if(i&&i.promise(k),n.crossDomain||w("X-Requested-With","XMLHttpRequest"),w("Accept",y||"*/*"),(y=n.mimeType||y)&&(y.indexOf(",")>-1&&(y=y.split(",",2)[0]),k.overrideMimeType&&k.overrideMimeType(y)),(n.contentType||n.contentType!==!1&&n.data&&"GET"!=n.type.toUpperCase())&&w("Content-Type",n.contentType||"application/x-www-form-urlencoded"),n.headers)for(g in n.headers)w(g,n.headers[g]);if(k.setRequestHeader=w,k.onreadystatechange=function(){if(4==k.readyState){k.onreadystatechange=u,clearTimeout(v);var t,r=!1;if(k.status>=200&&k.status<300||304==k.status||0==k.status&&"file:"==x){c=c||l(n.mimeType||k.getResponseHeader("content-type")),t=k.responseText;try{"script"==c?(1,eval)(t):"xml"==c?t=k.responseXML:"json"==c&&(t=C.test(t)?null:e.parseJSON(t))}catch(o){r=o}r?s(r,"parsererror",k,n,i):a(t,k,n,i)}else s(k.statusText||null,k.status?"error":"abort",k,n,i)}},o(k,n)===!1)return k.abort(),s(null,"abort",k,n,i),k;if(n.xhrFields)for(g in n.xhrFields)k[g]=n.xhrFields[g];var T="async"in n?n.async:!0;k.open(n.type,n.url,T,n.username,n.password);for(g in b)E.apply(k,b[g]);if(n.timeout>0&&(v=setTimeout(function(){k.onreadystatechange=u,k.abort(),s(null,"timeout",k,n,i)},n.timeout)),n.withCredentials)try{k.withCredentials=!0}catch(_){}return k.send(n.data?n.data:null),k},e.get=function(){return e.ajax(p.apply(null,arguments))},e.post=function(){var t=p.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=p.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.getScript=function(t,n,r){return"string"==typeof n&&null==r&&(r=n,n=null),e.ajax({url:t,type:"GET",charset:r,data:void 0,success:n,dataType:"jsonp"})},e.fn.load=function(t,n,r){if(!this.length)return this;var i,o=this,a=t.split(/\s/),s=p(t,n,r),c=s.success;return a.length>1&&(s.url=a[0],i=a[1]),s.success=function(t){o.html(i?e("<div>").html(t.replace(b,"")).find(i):t),c&&c.apply(o,arguments)},e.ajax(s),this};var T=encodeURIComponent;e.param=function(e,t){var n=[];return n.add=function(e,t){this.push(T(e)+"="+T(t))},h(n,e,t),n.join("&").replace(/%20/g,"+")}}(Zepto),function(e){e.fn.serializeArray=function(){var t,n=[];return e([].slice.call(this.get(0).elements)).each(function(){t=e(this);var r=t.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=r&&"reset"!=r&&"button"!=r&&("radio"!=r&&"checkbox"!=r||this.checked)&&n.push({name:t.attr("name"),value:t.val()})}),n},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(t)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(e,t){function n(e){return e.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function r(e){return i?i+e:e.toLowerCase()}var i,o,a,s,c,u,l,f,d,p,h="",m={Webkit:"webkit",Moz:"",O:"o"},g=window.document,v=g.createElement("div"),y=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,b={};e.each(m,function(e,n){return v.style[e+"TransitionProperty"]!==t?(h="-"+e.toLowerCase()+"-",i=n,!1):void 0}),o=h+"transform",b[a=h+"transition-property"]=b[s=h+"transition-duration"]=b[u=h+"transition-delay"]=b[c=h+"transition-timing-function"]=b[l=h+"animation-name"]=b[f=h+"animation-duration"]=b[p=h+"animation-delay"]=b[d=h+"animation-timing-function"]="",e.fx={off:i===t&&v.style.transitionProperty===t,speeds:{_default:400,fast:200,slow:600},cssPrefix:h,transitionEnd:r("TransitionEnd"),animationEnd:r("AnimationEnd")},e.fn.animate=function(n,r,i,o,a){return e.isFunction(r)&&(o=r,i=t,r=t),e.isFunction(i)&&(o=i,i=t),e.isPlainObject(r)&&(i=r.easing,o=r.complete,a=r.delay,r=r.duration),r&&(r=("number"==typeof r?r:e.fx.speeds[r]||e.fx.speeds._default)/1e3),a&&(a=parseFloat(a)/1e3),this.anim(n,r,i,o,a)},e.fn.anim=function(r,i,h,m,g){if(/MSIE/.test(navigator.userAgent))if("string"==typeof r&&0==r.indexOf("-webkit-"))r="-ms-"+r.substring(8);else if("object"==typeof r){var v={};for(var w in r)0==w.indexOf("-webkit-")?v["-ms-"+w.substring(8)]=r[w]:v[w]=r[w];r=v}var x,k,E,C={},T="",_=this,S=e.fx.transitionEnd,j=!1;if(i===t&&(i=e.fx.speeds._default/1e3),g===t&&(g=0),e.fx.off&&(i=0),"string"==typeof r)C[l]=r,C[f]=i+"s",C[p]=g+"s",C[d]=h||"linear",S=e.fx.animationEnd;else{k=[];for(x in r)y.test(x)?T+=x+"("+r[x]+") ":(C[x]=r[x],k.push(n(x)));T&&(C[o]=T,k.push(o)),i>0&&"object"==typeof r&&(C[a]=k.join(", "),C[s]=i+"s",C[u]=g+"s",C[c]=h||"linear")}return E=function(t){if("undefined"!=typeof t){if(t.target!==t.currentTarget)return;e(t.target).unbind(S,E)}else e(this).unbind(S,E);j=!0,e(this).css(b),m&&m.call(this)},i>0&&(this.bind(S,E),setTimeout(function(){j||E.call(_)},1e3*i+25)),this.size()&&this.get(0).clientLeft,this.css(C),0>=i&&setTimeout(function(){_.each(function(){E.call(this)})},0),this},v=null}(Zepto),function(e){var t,n=[];e.fn.remove=function(){return this.each(function(){this.parentNode&&("IMG"===this.tagName&&(n.push(this),this.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",t&&clearTimeout(t),t=setTimeout(function(){n=[]},6e4)),this.parentNode.removeChild(this))})}}(Zepto),function(e){function t(t,r){var c=t[s],u=c&&i[c];if(void 0===r)return u||n(t);if(u){if(r in u)return u[r];var l=a(r);if(l in u)return u[l]}return o.call(e(t),r)}function n(t,n,o){var c=t[s]||(t[s]=++e.uuid),u=i[c]||(i[c]=r(t));return void 0!==n&&(u[a(n)]=o),u}function r(t){var n={};return e.each(t.attributes||c,function(t,r){0==r.name.indexOf("data-")&&(n[a(r.name.replace("data-",""))]=e.zepto.deserializeValue(r.value))}),n}var i={},o=e.fn.data,a=e.camelCase,s=e.expando="Zepto"+ +new Date,c=[];e.fn.data=function(r,i){return void 0===i?e.isPlainObject(r)?this.each(function(t,i){e.each(r,function(e,t){n(i,e,t)})}):0==this.length?void 0:t(this[0],r):this.each(function(){n(this,r,i)})},e.fn.removeData=function(t){return"string"==typeof t&&(t=t.split(/\s+/)),this.each(function(){var n=this[s],r=n&&i[n];r&&e.each(t||r,function(e){delete r[t?a(this):e]})})},["remove","empty"].forEach(function(t){var n=e.fn[t];e.fn[t]=function(){var e=this.find("*");return"remove"===t&&(e=e.add(this)),e.removeData(),n.call(this)}})}(Zepto),function(e){function t(t){return t=e(t),!(!t.width()&&!t.height())&&"none"!==t.css("display")}function n(e,t){e=e.replace(/=#\]/g,'="#"]');var n,r,i=s.exec(e);if(i&&i[2]in a&&(n=a[i[2]],r=i[3],e=i[1],r)){var o=Number(r);r=isNaN(o)?r.replace(/^["']|["']$/g,""):o}return t(e,n,r)}var r=e.zepto,i=r.qsa,o=r.matches,a=e.expr[":"]={visible:function(){return t(this)?this:void 0},hidden:function(){return t(this)?void 0:this},selected:function(){return this.selected?this:void 0},checked:function(){return this.checked?this:void 0},parent:function(){return this.parentNode},first:function(e){return 0===e?this:void 0},last:function(e,t){return e===t.length-1?this:void 0},eq:function(e,t,n){return e===n?this:void 0},contains:function(t,n,r){return e(this).text().indexOf(r)>-1?this:void 0},has:function(e,t,n){return r.qsa(this,n).length?this:void 0}},s=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),c=/^\s*>/,u="Zepto"+ +new Date;r.qsa=function(t,o){return n(o,function(n,a,s){try{var l;!n&&a?n="*":c.test(n)&&(l=e(t).addClass(u),n="."+u+" "+n);var f=i(t,n)}catch(d){throw console.error("error performing selector: %o",o),d}finally{l&&l.removeClass(u)}return a?r.uniq(e.map(f,function(e,t){return a.call(e,t,f,s)})):f})},r.matches=function(e,t){return n(t,function(t,n,r){return!(t&&!o(e,t)||n&&n.call(e,null,r)!==e)})}}(Zepto),function(e){"__proto__"in{}||e.extend(e.zepto,{Z:function(t,n){return t=t||[],e.extend(t,e.fn),t.selector=n||"",t.__Z=!0,t},isZ:function(t){return"array"===e.type(t)&&"__Z"in t}});try{getComputedStyle(void 0)}catch(t){var n=getComputedStyle;window.getComputedStyle=function(e){try{return n(e)}catch(t){return null}}}}(Zepto),function(e){function t(e,t,n,r){return Math.abs(e-t)>=Math.abs(n-r)?e-t>0?"Left":"Right":n-r>0?"Up":"Down"}function n(){l=null,d.last&&(d.el.trigger("longTap"),d={})}function r(){l&&clearTimeout(l),l=null}function i(){s&&clearTimeout(s),c&&clearTimeout(c),u&&clearTimeout(u),l&&clearTimeout(l),s=c=u=l=null,d={}}function o(e){return("touch"==e.pointerType||e.pointerType==e.MSPOINTER_TYPE_TOUCH)&&e.isPrimary}function a(e,t){return e.type=="pointer"+t||e.type.toLowerCase()=="mspointer"+t}var s,c,u,l,f,d={},p=750;e(document).ready(function(){var h,m,g,v,y=0,b=0;"MSGesture"in window&&(f=new MSGesture,f.target=document.body),e(document).bind("MSGestureEnd",function(e){var t=e.velocityX>1?"Right":e.velocityX<-1?"Left":e.velocityY>1?"Down":e.velocityY<-1?"Up":null;t&&(d.el.trigger("swipe"),d.el.trigger("swipe"+t))}).on("touchstart MSPointerDown pointerdown",function(t){(!(v=a(t,"down"))||o(t))&&(g=v?t:t.touches[0],t.touches&&1===t.touches.length&&d.x2&&(d.x2=void 0,d.y2=void 0),h=Date.now(),m=h-(d.last||h),d.el=e("tagName"in g.target?g.target:g.target.parentNode),s&&clearTimeout(s),d.x1=g.pageX,d.y1=g.pageY,m>0&&250>=m&&(d.isDoubleTap=!0),d.last=h,l=setTimeout(n,p),f&&v&&f.addPointer(t.pointerId))}).on("touchmove MSPointerMove pointermove",function(e){(!(v=a(e,"move"))||o(e))&&(g=v?e:e.touches[0],r(),d.x2=g.pageX,d.y2=g.pageY,y+=Math.abs(d.x1-d.x2),b+=Math.abs(d.y1-d.y2))}).on("touchend MSPointerUp pointerup",function(n){(!(v=a(n,"up"))||o(n))&&(r(),d.x2&&Math.abs(d.x1-d.x2)>30||d.y2&&Math.abs(d.y1-d.y2)>30?u=setTimeout(function(){d.el.trigger("swipe"),d.el.trigger("swipe"+t(d.x1,d.x2,d.y1,d.y2)),d={}},0):"last"in d&&(30>y&&30>b?c=setTimeout(function(){var t=e.Event("tap");t.cancelTouch=i,d.el.trigger(t),d.isDoubleTap?(d.el&&d.el.trigger("doubleTap"),d={}):s=setTimeout(function(){s=null,d.el&&d.el.trigger("singleTap"),d={}},250)},0):d={}),y=b=0)}).on("touchcancel MSPointerCancel pointercancel",i),e(window).on("scroll",i)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.on(t,e)}})}(Zepto),define("zepto",function(e){return function(){var t;return t||e.$}}(this)),function(e,t){if("object"==typeof exports&&exports)t(exports);else{var n={};t(n),"function"==typeof define&&define.amd?define("mustache",n):e.Mustache=n}}(this,function(e){function t(e,t){return b.call(e,t)}function n(e){return!t(m,e)}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function i(e){return String(e).replace(/[&<>"'\/]/g,function(e){return k[e]})}function o(e){this.string=e,this.tail=e,this.pos=0}function a(e,t){this.view=e||{},this.parent=t,this._cache={}}function s(){this.clearCache()}function c(t,n,r,i){for(var o,a,s,u="",l=0,f=t.length;f>l;++l)switch(o=t[l],a=o[1],o[0]){case"#":if(s=r.lookup(a),"object"==typeof s)if(x(s))for(var d=0,p=s.length;p>d;++d)u+=c(o[4],n,r.push(s[d]),i);else s&&(u+=c(o[4],n,r.push(s),i));else if("function"==typeof s){var h=null==i?null:i.slice(o[3],o[5]);s=s.call(r.view,h,function(e){return n.render(e,r)}),null!=s&&(u+=s)}else s&&(u+=c(o[4],n,r,i));break;case"^":s=r.lookup(a),(!s||x(s)&&0===s.length)&&(u+=c(o[4],n,r,i));break;case">":s=n.getPartial(a),"function"==typeof s&&(u+=s(r));break;case"&":s=r.lookup(a),null!=s&&(u+=s);break;case"name":s=r.lookup(a),null!=s&&(u+=e.escape(s));break;case"text":u+=a}return u}function u(e){for(var t,n=[],r=n,i=[],o=0,a=e.length;a>o;++o)switch(t=e[o],t[0]){case"#":case"^":i.push(t),r.push(t),r=t[4]=[];break;case"/":var s=i.pop();s[5]=t[2],r=i.length>0?i[i.length-1][4]:n;break;default:r.push(t)}return n}function l(e){for(var t,n,r=[],i=0,o=e.length;o>i;++i)t=e[i],t&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(n=t,r.push(t)));return r}function f(e){return[new RegExp(r(e[0])+"\\s*"),new RegExp("\\s*"+r(e[1]))]}function d(t,i){function a(){if(T&&!_)for(;C.length;)delete E[C.pop()];else C=[];T=!1,_=!1}if(t=t||"",i=i||e.tags,"string"==typeof i&&(i=i.split(h)),2!==i.length)throw new Error("Invalid tags: "+i.join(", "));for(var s,c,d,m,b,w=f(i),x=new o(t),k=[],E=[],C=[],T=!1,_=!1;!x.eos();){if(s=x.pos,d=x.scanUntil(w[0]))for(var S=0,j=d.length;j>S;++S)m=d.charAt(S),n(m)?C.push(E.length):_=!0,E.push(["text",m,s,s+1]),s+=1,"\n"==m&&a();if(!x.scan(w[0]))break;if(T=!0,c=x.scan(y)||"name",x.scan(p),"="===c?(d=x.scanUntil(g),x.scan(g),x.scanUntil(w[1])):"{"===c?(d=x.scanUntil(new RegExp("\\s*"+r("}"+i[1]))),x.scan(v),x.scanUntil(w[1]),c="&"):d=x.scanUntil(w[1]),!x.scan(w[1]))throw new Error("Unclosed tag at "+x.pos);if(b=[c,d,s,x.pos],E.push(b),"#"===c||"^"===c)k.push(b);else if("/"===c){if(0===k.length)throw new Error('Unopened section "'+d+'" at '+s);var P=k.pop();if(P[1]!==d)throw new Error('Unclosed section "'+P[1]+'" at '+s)}else if("name"===c||"{"===c||"&"===c)_=!0;else if("="===c){if(i=d.split(h),2!==i.length)throw new Error("Invalid tags at "+s+": "+i.join(", "));w=f(i)}}var P=k.pop();if(P)throw new Error('Unclosed section "'+P[1]+'" at '+x.pos);return E=l(E),u(E)}var p=/\s*/,h=/\s+/,m=/\S/,g=/\s*=/,v=/\s*\}/,y=/#|\^|\/|>|\{|&|=|!/,b=RegExp.prototype.test,w=Object.prototype.toString,x=Array.isArray||function(e){return"[object Array]"===w.call(e)},k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};o.prototype.eos=function(){return""===this.tail},o.prototype.scan=function(e){var t=this.tail.match(e);return t&&0===t.index?(this.tail=this.tail.substring(t[0].length),this.pos+=t[0].length,t[0]):""},o.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n),this.pos+=n}return t},a.make=function(e){return e instanceof a?e:new a(e)},a.prototype.push=function(e){return new a(e,this)},a.prototype.lookup=function(e){var t=this._cache[e];if(!t){if("."==e)t=this.view;else for(var n=this;n;){if(e.indexOf(".")>0){t=n.view;for(var r=e.split("."),i=0;t&&i<r.length;)t=t[r[i++]]}else t=n.view[e];if(null!=t)break;n=n.parent}this._cache[e]=t}return"function"==typeof t&&(t=t.call(this.view)),t},s.prototype.clearCache=function(){this._cache={},this._partialCache={}},s.prototype.compile=function(t,n){var r=this._cache[t];if(!r){var i=e.parse(t,n);r=this._cache[t]=this.compileTokens(i,t)}return r},s.prototype.compilePartial=function(e,t,n){var r=this.compile(t,n);return this._partialCache[e]=r,r},s.prototype.getPartial=function(e){return e in this._partialCache||!this._loadPartial||this.compilePartial(e,this._loadPartial(e)),this._partialCache[e]},s.prototype.compileTokens=function(e,t){var n=this;return function(r,i){if(i)if("function"==typeof i)n._loadPartial=i;else for(var o in i)n.compilePartial(o,i[o]);return c(e,n,a.make(r),t)}},s.prototype.render=function(e,t,n){return this.compile(e)(t,n)},e.name="mustache.js",e.version="0.7.2",e.tags=["{{","}}"],e.Scanner=o,e.Context=a,e.Writer=s,e.parse=d,e.escape=i;var E=new s;e.clearCache=function(){return E.clearCache()},e.compile=function(e,t){return E.compile(e,t)},e.compilePartial=function(e,t,n){return E.compilePartial(e,t,n)},e.compileTokens=function(e,t){return E.compileTokens(e,t)},e.render=function(e,t,n){return E.render(e,t,n)},e.to_html=function(t,n,r,i){var o=e.render(t,n,r);return"function"!=typeof i?o:void i(o)}});var __slice=[].slice,__bind=function(e,t){return function(){return e.apply(t,arguments)}};define("Deferred",[],function(){var e,t,n,r,i;if(!Array.prototype.forEach)throw new Error("Deferred requires Array.forEach");return r=function(n){return n instanceof e||n instanceof t},n=function(e,t){return 0>=e?t():function(){return--e<1?t.apply(this,arguments):void 0}},t=function(){function e(e){this._deferred=e}return e.prototype._deferred=null,e.prototype.done=function(){var e,t;return e=1<=arguments.length?__slice.call(arguments,0):[],(t=this._deferred).done.apply(t,e),this},e.prototype.fail=function(){var e,t;return e=1<=arguments.length?__slice.call(arguments,0):[],(t=this._deferred).fail.apply(t,e),this},e.prototype.pipe=function(e,t){return this._deferred.pipe(e,t)},e.prototype.then=function(e,t){return this._deferred.pipe(e,t)},e.prototype.state=function(){return this._deferred.state()},e}(),e=function(){function e(e){this.resolve=__bind(this.resolve,this),this.reject=__bind(this.reject,this),this.promise=__bind(this.promise,this),this.progress=__bind(this.progress,this),this.pipe=__bind(this.pipe,this),this.notify=__bind(this.notify,this),this.fail=__bind(this.fail,this),this.done=__bind(this.done,this),this._state="pending","function"==typeof e&&e.call(this,this)}return e.prototype.done=function(){var e,t,n=this;return e=1<=arguments.length?__slice.call(arguments,0):[],0===e.length?this:("resolved"===this._state?e.forEach(function(e){return e.apply(null,n._withArguments)}):"pending"===this._state&&(this._doneCallbacks||(this._doneCallbacks=[]),(t=this._doneCallbacks).push.apply(t,e)),this)},e.prototype.fail=function(){var e,t,n=this;return e=1<=arguments.length?__slice.call(arguments,0):[],0===e.length?this:("rejected"===this._state?e.forEach(function(e){return e.apply(null,n._withArguments)}):"pending"===this._state&&(this._failCallbacks||(this._failCallbacks=[]),(t=this._failCallbacks).push.apply(t,e)),this)},e.prototype.notify=function(){var e,t;return e=1<=arguments.length?__slice.call(arguments,0):[],"pending"!==this._state?this:(null!=(t=this._progressCallbacks)&&t.forEach(function(t){return t.apply(null,e)}),this)},e.prototype.pipe=function(t,n){var i;return i=new e,this.done(function(){var e,n;return e=1<=arguments.length?__slice.call(arguments,0):[],null!=t?(n=t.apply(null,e),r(n)?n.done(function(){var e;return e=1<=arguments.length?__slice.call(arguments,0):[],i.resolve.apply(i,e)}).fail(function(){var e;return e=1<=arguments.length?__slice.call(arguments,0):[],i.reject.apply(i,e)}):i.resolve(n)):i.resolve.apply(i,e)}),this.fail(function(){var e,t;return e=1<=arguments.length?__slice.call(arguments,0):[],null!=n?(t=n.apply(null,e),r(t)?t.done(function(){var e;return e=1<=arguments.length?__slice.call(arguments,0):[],i.resolve.apply(i,e)}).fail(function(){var e;return e=1<=arguments.length?__slice.call(arguments,0):[],i.reject.apply(i,e)}):i.reject(t),i.reject.apply(i,e)):i.reject.apply(i,e)}),i.promise()},e.prototype.progress=function(){var e,t;return e=1<=arguments.length?__slice.call(arguments,0):[],0===e.length||"pending"!==this._state?this:(this._progressCallbacks||(this._progressCallbacks=[]),(t=this._progressCallbacks).push.apply(t,e),this)},e.prototype.promise=function(){return this._promise||(this._promise=new t(this))},e.prototype.reject=function(){var e,t;return e=1<=arguments.length?__slice.call(arguments,0):[],"pending"!==this._state?this:(this._state="rejected",this._withArguments=e,null!=(t=this._failCallbacks)&&t.forEach(function(t){return t.apply(null,e)}),this)},e.prototype.resolve=function(){var e,t;return e=1<=arguments.length?__slice.call(arguments,0):[],"pending"!==this._state?this:(this._state="resolved",this._withArguments=e,null!=(t=this._doneCallbacks)&&t.forEach(function(t){return t.apply(null,e)}),this)},e.prototype.state=function(){return this._state},e}(),i=function(){var t,i,o,a;return o=1<=arguments.length?__slice.call(arguments,0):[],0===o.length?(new e).resolve().promise():1===o.length?r(o[0])?o[0].promise():(new e).resolve(o[0]).promise():(i=new e,t=[],a=n(o.length,function(){return i.resolve.apply(i,t)}),o.forEach(function(e,n){return r(e)?e.done(function(){var e;return e=1<=arguments.length?__slice.call(arguments,0):[],t[n]=e.length>1?e:e[0],a()}).fail(i.reject):(t[n]=e,a())}),i.promise())},{Deferred:function(){return new e},when:i}}),define("common/url",[],function(){function e(e){this._fields={Username:4,Password:5,Port:7,Protocol:2,Host:6,Pathname:8,URL:0,Querystring:9,Fragment:10},this._values={},this._regex=null,this._regex=/^((\w+):\/\/)?((\w+):?(\w+)?@)?([^\/\?:]+):?(\d+)?(\/?[^\?#]+)?\??([^#]+)?#?(\w*)/;for(var t in this._fields)this["get"+t]=this._makeGetter(t),"undefined"!=typeof e&&this.parse(e)}return e.prototype={parse:function(e){this.url=e;for(var t in this._fields)this._values[t]="";var n=this._regex.exec(e);if(!n)throw"URLParser::_parse -> Invalid URL";for(var t in this._fields)"undefined"!=typeof n[this._fields[t]]&&(this._values[t]=n[this._fields[t]]);if(this._values.Querystring.length){for(var r=this._values.Querystring,i={},o=r.split("&"),a=0;a<o.length;a++){var s=o[a],c=s.split("="),u=c[0],l=decodeURIComponent(c[1]);if(u in i){if(/array/i.test(Object.prototype.toString.call(i[u])));else{var f=i[u];i[u]=[],i[u].push(f)}i[u].push(l)}else i[u]=l}this._values.Params=i}return this._values},_makeGetter:function(e){return this.refresh(),function(){return this._values[e]}},getParam:function(e){this.refresh();var t=this.getParamObject(e);return/array/i.test(Object.prototype.toString.call(t))?t[t.length-1]:t},getParamObject:function(e){return this.refresh(),this._values.Params?this._values.Params[e]:null},getHash:function(){return this.refresh(),location.hash},setHash:function(e){this.refresh(),"pushState"in history&&(""==e||null==e||e.length&&""==e.trim())?history.pushState("",document.title,location.pathname+location.search):location.hash=e},replaceHash:function(e){this.refresh(),"replaceState"in history?history.replaceState("",document.title,location.pathname+location.search+(""==e?"":"#"+e)):location.hash=e},getDomainUrl:function(){return this.refresh(),this.getProtocol()+"://"+this.getHost()},getTouchBaseUrl:function(){return this.refresh(),this.getDomainUrl()+"/t/"},refresh:function(){this.url!=location.href&&this.parse(location.href)},redirect:function(e){setTimeout(function(){location.href=e},0)}},new e(location.href)}),define("common/cookie",[],function(){return{get:function(e){var t=new RegExp("(^|;|\\s+)"+e+"=([^;]*)(;|$)"),n=document.cookie.match(t);
return n?unescape(n[2]):null},add:function(e,t,n,r,i){var o=e+"="+escape(t)+"; path="+(n||"/")+(i?"; domain="+i:"");if(r>0){var a=new Date;a.setTime(a.getTime()+1e3*r),o+=";expires="+a.toGMTString()}document.cookie=o},del:function(e,t,n){2==arguments.length&&(n=t,t="/"),document.cookie=e+"=;path="+t+";"+(n?"domain="+n+";":"")+"expires=Thu, 01-Jan-70 00:00:01 GMT"}}}),function(e){var t=[],n={},r="routie",i=e[r],o=function(e,t){this.name=t,this.path=e,this.keys=[],this.fns=[],this.params={},this.regex=a(this.path,this.keys,!1,!1)};o.prototype.addHandler=function(e){this.fns.push(e)},o.prototype.removeHandler=function(e){for(var t=0,n=this.fns.length;n>t;t++){var r=this.fns[t];if(e==r)return void this.fns.splice(t,1)}},o.prototype.run=function(e){for(var t=0,n=this.fns.length;n>t;t++)this.fns[t].apply(this,e)},o.prototype.match=function(e,t){var n=this.regex.exec(e);if(!n)return!1;for(var r=1,i=n.length;i>r;++r){var o=this.keys[r-1],a="string"==typeof n[r]?decodeURIComponent(n[r]):n[r];o&&(this.params[o.name]=a),t.push(a)}return!0},o.prototype.toURL=function(e){var t=this.path;for(var n in e)t=t.replace("/:"+n,"/"+e[n]);if(t=t.replace(/\/:.*\?/g,"/").replace(/\?/g,""),-1!=t.indexOf(":"))throw new Error("missing parameters for url: "+t);return t};var a=function(e,t,n,r){return e instanceof RegExp?e:(e instanceof Array&&(e="("+e.join("|")+")"),e=e.concat(r?"":"/?").replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(e,n,r,i,o,a){return t.push({name:i,optional:!!a}),n=n||"",""+(a?"":n)+"(?:"+(a?n:"")+(r||"")+(o||r&&"([^/.]+?)"||"([^/]+?)")+")"+(a||"")}).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)"),new RegExp("^"+e+"$",n?"":"i"))},s=function(e,r){var i=e.split(" "),a=2==i.length?i[0]:null;e=2==i.length?i[1]:i[0],n[e]||(n[e]=new o(e,a),t.push(n[e])),n[e].addHandler(r)},c=function(e,t){if("function"==typeof t)s(e,t),c.reload();else if("object"==typeof e){for(var n in e)s(n,e[n]);c.reload()}else"undefined"==typeof t&&c.navigate(e)};c.lookup=function(e,n){for(var r=0,i=t.length;i>r;r++){var o=t[r];if(o.name==e)return o.toURL(n)}},c.remove=function(e,t){var r=n[e];r&&r.removeHandler(t)},c.removeAll=function(){n={},t=[]},c.navigate=function(e,t){t=t||{};var n=t.silent||!1;n&&p(),setTimeout(function(){window.location.hash=e,n&&setTimeout(function(){d()},1)},1)},c.noConflict=function(){return e[r]=i,c};var u=function(){return window.location.hash.substring(1)},l=function(e,t){var n=[];return t.match(e,n)?(t.run(n),!0):!1},f=c.reload=function(){for(var e=u(),n=0,r=t.length;r>n;n++){var i=t[n];if(l(e,i))return}},d=function(){e.addEventListener?e.addEventListener("hashchange",f,!1):e.attachEvent("onhashchange",f)},p=function(){e.removeEventListener?e.removeEventListener("hashchange",f):e.detachEvent("onhashchange",f)};d(),e[r]=c}(window),define("common/routie",function(){});var deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),deviceIsIOS4=deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),deviceIsIOSWithBadTarget=deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent);FastClick.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(deviceIsIOS&&"file"===e.type||e.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(e.className)},FastClick.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!deviceIsAndroid;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},FastClick.prototype.sendClick=function(e,t){var n,r;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),r=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},FastClick.prototype.determineEventType=function(e){return deviceIsAndroid&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(e){var t;deviceIsIOS&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},FastClick.prototype.updateScrollParent=function(e){var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},FastClick.prototype.onTouchStart=function(e){var t,n,r;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],deviceIsIOS){if(r=window.getSelection(),r.rangeCount&&!r.isCollapsed)return!0;if(!deviceIsIOS4){if(n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n?!0:!1},FastClick.prototype.onTouchMove=function(e){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(e){var t,n,r,i,o,a=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,deviceIsIOSWithBadTarget&&(o=e.changedTouches[0],a=document.elementFromPoint(o.pageX-window.pageXOffset,o.pageY-window.pageYOffset)||a,a.fastClickScrollParent=this.targetElement.fastClickScrollParent),r=a.tagName.toLowerCase(),"label"===r){if(t=this.findControl(a)){if(this.focus(a),deviceIsAndroid)return!1;a=t}}else if(this.needsFocus(a))return e.timeStamp-n>100||deviceIsIOS&&window.top!==window&&"input"===r?(this.targetElement=null,!1):(this.focus(a),this.sendClick(a,e),deviceIsIOS&&"select"===r||(this.targetElement=null,e.preventDefault()),!1);return deviceIsIOS&&!deviceIsIOS4&&(i=a.fastClickScrollParent,i&&i.fastClickLastScrollTop!==i.scrollTop)?!0:(this.needsClick(a)||(e.preventDefault(),this.sendClick(a,e)),!1)},FastClick.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(e){return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0},FastClick.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},FastClick.prototype.destroy=function(){var e=this.layer;deviceIsAndroid&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(e){var t,n;if("undefined"==typeof window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!deviceIsAndroid)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}return"none"===e.style.msTouchAction?!0:!1},FastClick.attach=function(e,t){return new FastClick(e,t)},define("common/fastclick",function(){}),define("common",["zepto","mustache","Deferred","common/url","common/cookie","common/routie","common/fastclick"],function(e,t,n,r,i){e.mustache=t,e.util={inherit:function(e,t){function n(){this.constructor=e}return"function"!=typeof t&&(t=e,e=function(){e.prototype.constructor!=e?e.prototype.constructor.apply(this,arguments):t.apply(this,arguments)}),n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e.superClass=t,e},uniqueId:function(){var e=0;return function(t){var n=++e+"";return t?t+n:n}}(),bind:function(e,t){return function(){return e.apply(t,arguments)}}},e.util.Deferred=n.Deferred,e.util.Deferred.when=n.when;var o=e.ajax;return e.ajax=function(e){var t,r;return r=n.Deferred(),t=function(e,t){return function(){var n;return n=1<=arguments.length?__slice.call(arguments,0):[],"function"==typeof e&&e.apply(null,n),t.apply(null,n)}},e.success=t(e.success,r.resolve),e.error=t(e.error,r.reject),o(e),r.promise()},e.url=r,e.cookie=i,Date.prototype.toString=function(){var e={d:"getDate",h:"getHours",m:"getMinutes",s:"getSeconds"},t=/(yy|M|d|h|m|s)\1?/g,n=Date.prototype.toString;return function(r){var i=this;return r?r.replace(t,function(t,n){var r,o=t!=n;switch(n){case"yy":return r=i.getFullYear(),o&&r||r%100;case"M":r=i.getMonth()+1;break;default:r=i[e[n]]()}return o&&9>=r&&"0"+r||r}):n.call(i)}}(),e.xsr=function(){var t={},n=1e4;switch(arguments.length){case 1:var r=arguments[0];"string"==typeof r?e.get(r):"object"==typeof r&&e.ajax({url:r.url,type:r.method,timeout:r.timeout||n,dataType:r.dataType||"json",success:r.success,error:r.error});break;case 2:var r=arguments[0],i=arguments[1];if("string"==typeof r&&"function"==typeof i)e.ajax({url:r,type:"get",timeout:n,dataType:"json",success:i,error:function(e,t){i({errno:t.toUpperCase()})}});else if("object"==typeof r&&"function"==typeof i)switch(r.way){case"jsonp":e.ajax({type:"get",dataType:"jsonp",url:r.url,headers:t,timeout:n,success:i,error:function(e,t){i({errno:t.toUpperCase()})}});break;case"iframePost":e.iframePost.apply(this,arguments);break;case"script":var o=document.createElement("script");document.body.appendChild(o);var n=setTimeout(function(){document.body.removeChild(o)},5e3);o.onload=function(){clearTimeout(n);try{i()}catch(e){}finally{document.body.removeChild(o)}},o.src=r.url;break;default:r.urlEncodeCharset&&(t.urlEncodeCharset=r.urlEncodeCharset),e.ajax("get"==r.method?{type:"get",url:r.url,headers:t,timeout:n,dataType:"json",success:i,error:function(e,t){i({errno:t.toUpperCase()})},withCredentials:0==r.cookie?!1:!0}:{url:r.url,type:"post",data:r.postData,headers:t,timeout:n,dataType:"json",success:i,error:function(e,t){i({errno:t.toUpperCase()})},withCredentials:0==r.cookie?!1:!0})}break;default:e.iframePost.apply(this,arguments)}},e}),define("util",[],function(){function e(e,t){var n="";for(i=1;i<=t-e.length;i++)n+="0";return n+e}return{formatTime:function(e){return console.log(e),new Date(1e3*parseInt(e,10)).toString("yyyy-MM-dd hh:mm")},formatPrice:function(e){return e.toFixed(2)},stringToHex:function(t){for(var n=[],r=0;r<t.length;r++)n.push(e(t.charCodeAt(r).toString(16),4));return n.join("")},processNum:function(e){return e=parseInt(e),1>e?"":(100>e?e="+"+e:1e3>e?e="99+":1e4>e?e=parseInt(e/1e3)+"k+":1e5>e&&(e=parseInt(e/1e4)+"w+"),e)},objToString:function(e){var t=JSON.stringify(e);return t=t.replace(/\"/g,"'").replace(/\[/g,"%5b").replace(/\]/g,"%5d")},splicStr:function(e,t,n){var r=0;e=e.split("");for(var i=0;i<e.length;i++)if(e[i].charCodeAt(0)<299?r++:r+=2,r/2>t)return e=e.join("").substr(0,i),e+=n;return e+n},formatSales:function(e){var t,n=(parseInt(e)+"").length;if(5>n){var r=Math.pow(10,n-1);t=parseInt(e/r)*r}else{var r=Math.pow(10,n-1);t=parseInt(e/r)*r/1e4+"ä¸"}return t}}}),define("common/store",[],function(){function e(e,t){try{localStorage.setItem(e,t)}catch(n){}}function t(e){var t;try{t=localStorage.getItem(e)}catch(n){}return t}function n(e){try{localStorage.removeItem(e)}catch(t){}}function r(){try{localStorage.setItem("testPrivate",1),localStorage.removeItem("testPrivate")}catch(e){return e.toString().indexOf("QUOTA_EXCEEDED_ERR"),!0}return!1}return{set:e,get:t,del:n,isPrivateBrowse:r}}),define("model/base",["common"],function(e){var t=["url"],n=function(n){this.cid=e.util.uniqueId("model"),n=n||{};for(var r in n)n.hasOwnProperty(r)&&-1!==t.indexOf(r)&&(this[r]=n[r]);this.initialize(n),this.retJSON=null};return e.extend(n.prototype,{initialize:function(){},fetch:function(t){var n=this;t.urlREST&&t.url&&(t.url=t.url+t.urlREST.join("/"));var r=e.extend({type:"GET",charset:"utf8",dataType:"jsonp",jsonp:"callback",timeout:1e5},t);if(this.retJSON){var i=e.util.Deferred();return setTimeout(function(){i.resolve(n.retJSON)},0),i.promise()}return e.ajax(r).done(function(){})}}),n}),define("config/url",[],function(){var e=this;return function(){var e="http://rs.jd.com",t=e,n={mainDomain:e,apiUrl:t,transitApiUrl:"http://h5.m.jd.com"};for(var r in location){var i=location[r];"string"==typeof i&&(n[r]=i)}return n.rule={pic:{url:"http://img30.360buyimg.com/n3/",accLink:""}},n}.call(e)}),define("model/accessorie",["common","model/base","config/url","util"],function(e,t,n){var r=e.util.inherit(t);return e.extend(r.prototype,{initialize:function(e){this.id=e.id||null},brandsList:function(e,t){return t=t||{},t.url=n.apiUrl+"/accessoriesEntrance/initBrandName.jsonp",t.data=e,r.superClass.prototype.fetch.call(this,t)},typeList:function(e,t){return t=t||{},t.url=n.apiUrl+"/accessoriesEntrance/styleByByBrandName.jsonp",t.data=e,r.superClass.prototype.fetch.call(this,t)},accessoresList:function(e,t){return t=t||{},t.url=n.apiUrl+"/accessoriesEntrance/initAccessoresType.jsonp",t.data=e,r.superClass.prototype.fetch.call(this,t)},goodsList:function(e,t){return t=t||{},t.url=n.apiUrl+"/accessorie/page.jsonp",t.data=e,r.superClass.prototype.fetch.call(this,t)},attrPanel:function(e,t){return t=t||{},t.url=n.apiUrl+"/accessorie/center.jsonp",t.data=e,r.superClass.prototype.fetch.call(this,t)},defaultList:function(e,t){return t=t||{},t.url=n.transitApiUrl+"/h5api.jsp",t.data=e,r.superClass.prototype.fetch.call(this,t)},accessoryGroup:function(e,t){return t=t||{},t.url=n.apiUrl+"/accessorie/service.jsonp",t.data=e,r.superClass.prototype.fetch.call(this,t)},skuNumber:function(e,t){return t=t||{},t.url="http://172.22.144.53:1604/h5api.jsp",t.data=e,r.superClass.prototype.fetch.call(this,t)}}),r}),define("tpl/tplhelper",["util"],function(e){return{formatTime:function(){return function(t,n){return e.formatTime(n(t))}},formatPrice:function(){return function(t,n){return e.formatPrice(n(t))}},formatFloat:function(){return function(e,t){return parseFloat(t(e)).toFixed(2)}}}}),define("view/base",["common","tpl/tplhelper","config/url"],function(e,t,n){var r=/^(\S+)\s*(.*)$/,i=["model","collection","el","id","attributes","className","tagName","events","tpl","fill","renderType"],o=function(t,n){if(this.cid=e.util.uniqueId("view"),t)for(var r in t)t.hasOwnProperty(r)&&-1!==i.indexOf(r)&&(this[r]=t[r]);this.renderData=n,this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()};return e.extend(o.prototype,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},_ensureElement:function(){if(this.el)this.setElement(this.el,!1);else{var t=e.extend({},this.attributes);this.id&&(t.id=this.id),this.className&&(t.className=this.className),t["class"]&&(t.className=t["class"]);var n=e.extend(document.createElement(this.tagName),t);this.setElement(n,!1)}},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e?t:e(t),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(t,n){if(!t&&!(t=this.events))return this;n||this.undelegateEvents();for(var i in t){var o=t[i];"function"!=typeof o&&(o=this[t[i]]);var a=i.match(r),s=a[1],c=a[2];s+=".delegateEvents"+this.cid,o=e.util.bind(o,this),this.$el.on(s,c?c:null,o)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},render:function(r,i){this.renderData=r;var o,a;r.CONFIG=n,e.isFunction(this.beforeRender)&&this.beforeRender(r);var s=e.extend({},r,t);if("normal"==this.renderType)o=e.mustache.render(this.tpl,s),this.fill&&"after"==this.fill?this.$el.append(o):this.fill&&"before"==this.fill?this.$el.prepend(o):this.$el.html(o);else{a="string"==typeof i?this.$el.find(i).find(".J_template"):this.$el.find(".J_template");for(var c=0,u=a.length;u>c;c++){var l=e(a[c]);o="object"==typeof this.tpl?e.mustache.render(l.text(),s,this.tpl):e.mustache.render(l.text(),s),this.fill&&"after"==this.fill?l.parent().append(o):this.fill&&"before"==this.fill?l.parent().prepend(o):(l.siblings().remove(),l.before(o))}}return spinner&&spinner.stop(),e.isFunction(this.afterRender)&&this.afterRender(r),this}}),o}),define("view/index/toolBar",["common","view/base"],function(e,t){var n=e.util.inherit(t);return e.extend(n.prototype,{events:{"click .menu-trigger":"handleMenu","click .item-brand-trigger":"getModelList","close .menu-trigger":"closeBrandList"},handleMenu:function(t){var n=e(t.currentTarget),r=n.attr("rel"),i=e("#"+r),o=e(".menu-pop");if(n.hasClass("cur"))n.removeClass("cur"),o.hide(),i.hide();else{o.show(),n.addClass("cur").siblings().removeClass("cur"),i.show().siblings(".menu-list").hide();var a=n.width(),s=n.offset().left,c=s+parseInt(a/2);e(".icon-arrow").css("left",c)}"menu-list-acc"==r?ping.click({report_eventid:"Accessory_CategoryFilter"}):"menu-list-model"==r&&ping.click({report_eventid:"Accessory_BrandFilter"})},getModelList:function(t){var n=e(t.currentTarget),r=n.siblings(".sub-list"),i="cur",o={},a=n.parent(),s=a.attr("data-sku");if(a.siblings("li").removeClass(i),a.hasClass(i))a.removeClass(i);else{a.addClass(i),r.html(e("<div/>",{"class":"loading-sublist"}).text("åªåå è½½ä¸­..."));var c=n.attr("data-brand"),u=e("<div/>");o.brandName=encodeURI(c),this.model.typeList(o).done(function(t){e.each(t.styleByBrandName,function(t,n){e("<a/>").html(n.style).attr({href:"index.html?sku="+n.sku,"data-sku":n.sku,"class":"tag-model"}).appendTo(u)}),s&&u.find('[data-sku="'+s+'"]').addClass("cur"),r.html(u.html())}),ping.click({report_eventid:"Accessory_Brand",report_eventparam:c})}},closeBrandList:function(){e(".menu-trigger").removeClass("cur"),e(".menu-pop").hide()},afterRender:function(t){if(t.showAccMenu&&e(".menu .fittings").show(),t.phone.brand&&t.phone.sku){var n=t.phone.brand,r=t.phone.sku,i=t.phone.style;this.$('li[data-brand="'+n+'"]').attr("data-sku",r).addClass("item-selected").find(".select-sub").text(i)}t.acc&&(e("#menu-trigger-acc").attr("data-acc",t.acc.accId).find("span").text(t.acc.accName),e("#menu-list-acc").find('[data-acc-id="'+t.acc.accId+'"]').addClass("cur")),e("#J_Menu").show()}}),n}),define("text",["module"],function(e){var t,n,r,i,o,a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],s=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,c=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,u="undefined"!=typeof location&&location.href,l=u&&location.protocol&&location.protocol.replace(/\:/,""),f=u&&location.hostname,d=u&&(location.port||void 0),p={},h=e.config&&e.config()||{};return t={version:"2.0.10",strip:function(e){if(e){e=e.replace(s,"");var t=e.match(c);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:h.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=a[t];try{e=new ActiveXObject(n)}catch(r){}if(e){a=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,o=e.indexOf("."),a=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!a||o>1)?(t=e.substring(0,o),n=e.substring(o+1,e.length)):t=e,r=n||t,o=r.indexOf("!"),-1!==o&&(i="strip"===r.substring(o+1),r=r.substring(0,o),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var o,a,s,c=t.xdRegExp.exec(e);return c?(o=c[2],a=c[3],a=a.split(":"),s=a[1],a=a[0],!(o&&o!==n||a&&a.toLowerCase()!==r.toLowerCase()||(s||a)&&s!==i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,h.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText)return void r();h.isBuild=i.isBuild;var o=t.parseName(e),a=o.moduleName+(o.ext?"."+o.ext:""),s=n.toUrl(a),c=h.useXhr||t.useXhr;return 0===s.indexOf("empty:")?void r():void(!u||c(s,l,f,d)?t.get(s,function(n){t.finishLoad(e,o.strip,n,r)},function(e){r.error&&r.error(e)}):n([a],function(e){t.finishLoad(o.moduleName+"."+o.ext,o.strip,e,r)}))},write:function(e,n,r){if(p.hasOwnProperty(n)){var i=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+i+"';});\n")}},writeFile:function(e,n,r,i,o){var a=t.parseName(n),s=a.ext?"."+a.ext:"",c=a.moduleName+s,u=r.toUrl(a.moduleName+s)+".js";t.load(c,r,function(){var n=function(e){return i(u,e)};n.asModule=function(e,t){return i.asModule(e,u,t)},t.write(e,c,n,o)},o)}},"node"===h.env||!h.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");0===i.indexOf("ï»¿")&&(i=i.substring(1)),t(i)}catch(o){r(o)}}):"xhr"===h.env||!h.env&&t.createXhr()?t.get=function(e,n,r,i){var o,a=t.createXhr();if(a.open("GET",e,!0),i)for(o in i)i.hasOwnProperty(o)&&a.setRequestHeader(o.toLowerCase(),i[o]);h.onXhr&&h.onXhr(a,e),a.onreadystatechange=function(){var t,i;4===a.readyState&&(t=a.status,t>399&&600>t?(i=new Error(e+" HTTP status: "+t),i.xhr=a,r(i)):n(a.responseText),h.onXhrComplete&&h.onXhrComplete(a,e))},a.send(null)}:"rhino"===h.env||!h.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,r,i="utf-8",o=new java.io.File(e),a=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),i)),c="";try{for(n=new java.lang.StringBuffer,r=s.readLine(),r&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),null!==r&&n.append(r);null!==(r=s.readLine());)n.append(a),n.append(r);c=String(n.toString())}finally{s.close()}t(c)}:("xpconnect"===h.env||!h.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,a,s,c={};o&&(e=e.replace(/\//g,"\\")),s=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(s,1,0,!1),a=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),a.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),a.readString(n.available(),c),a.close(),n.close(),t(c.value)}catch(u){throw new Error((s&&s.path||"")+": "+u)}}),t}),define("text!tpl/widget/alert.mustache",[],function(){return'<div class="alert-overlay"></div>\r\n<div class="remind_box alert_box J_alert">\r\n        <h3>{{title}}</h3>\r\n        <p>{{msg}}</p>\r\n        <a href="javascript:;" id="J_button_ok" >ç¡®å®</a>\r\n</div>'}),define("view/widget/alert",["common","view/base","text!tpl/widget/alert.mustache"],function(e,t,n){var r=e.util.inherit(t);return e.extend(r.prototype,{el:"#J_view_message",renderType:"normal",tpl:n,events:{"click #J_button_ok":"ok"},afterRender:function(){e(".J_alert").on("touchmove",function(e){e.preventDefault()});var t=e(".J_alert").offset().height,n=document.documentElement.clientHeight||document.body.clientHeight;e(".J_alert").css({top:(n-t)/2+"px"});var r=document.documentElement.clientWidth||document.body.clientWidth;n<e("body").height()&&(n=e("body").height()),e(".alert-overlay").css({height:n+"px",width:r+"px"}),e(".alert-overlay").on("touchmove",function(e){e.preventDefault()})},ok:function(t){t.preventDefault(),this.callback&&this.callback(),e(this.el).empty()}}),r}),define("app/index/toolBar",["common","common/store","model/accessorie","view/index/toolBar","view/widget/alert"],function(e,t,n,r,i){return{init:function(t,o){var a=e.util.Deferred(),s=new n,c=new r({model:s,el:"#J_Menu",fill:"after"}),u={initBrandName:null};void 0!=t?(u.phone=t,u.showAccMenu=!0):(u.phone={style:"éæ©ææº"},u.showAccMenu=!1),void 0!=o&&(u.acc=o);var l={};return l._=(new Date).getTime()/1e3,s.brandsList(l).done(function(e){if("object"==typeof e)return u.initBrandName=e.initBrandName,s.accessoresList(l).done(function(e){u.initAccessoresType=e.initAccessoresType,c.render(u)}),a.resolve(e);var t=new alertView;return t.render({msg:e.msg}),a.reject(e)}).fail(function(){return(new i).render({msg:"ç½ç»ä¸ç¨³å®ï¼ä¼æ¯ä¸ä¸ï¼ç¨åè¯è¯~"}),a.reject()}),a.promise()}}}),define("view/widget/endless",["common"],function(){return function(e){function t(e){var t,n,r;return u[e]?(t=u[e].offTop,n=u[e].offsetHeight):(node=document.getElementById("s-"+e),n=parseInt(node.offsetHeight),t=parseInt(node.offsetTop),r={node:node,offTop:t,offsetHeight:n},u[e]=r),t+n>o&&a>t?!0:!1}function n(){for(var e,n=c,r=0,i=n.length;i>r;r++){e=n[r].img;var o=n[r].src;if(t(n[r].id)){var a=function(){var t,n;return t=e,n=o,function(){t.src=n,t.style.opacity=1,s[o]=!0}}(),u=new Image;u.onload=a,u.src=n[r].src}}}function r(t,s){return!s&&l>=window.scrollY?void window.setTimeout(r,100):(l=window.scrollY,f=window.scrollY,i=window.innerHeight,o=f-1e3,a=f+i+1e3,window.scrollY+i+1e3>document.body.offsetHeight&&e(),n(),void window.setTimeout(r,100))}var i,o,a,s={},c=[],u={},l=window.pageYOffset,f=window.pageYOffset;window.setTimeout(r,100)}}),define("view/detail/attrPanel",["common","view/base"],function(e,t){var n=e.util.inherit(t);return e.extend(n.prototype,{initialize:function(){e(document).on("click","#J_AttrTrigger",e.util.bind(this.triggerAttr,this)),e(document).on("click",".overlay",e.util.bind(this.closeAttr,this)),this.$el.bind("close",e.util.bind(this.closeAttr,this))},events:{"click .attr-first-li":"showAttrSecond","click .attr-sec-li":"selectOption"},triggerAttr:function(){e("#menu-trigger-acc,#menu-trigger-model").hasClass("cur")||(e(".overlay").show(),e(".filter").addClass("active"))},showAttrSecond:function(t){var n=e(t.currentTarget),r=n.data("attr-id");e(".filter-sub").addClass("active"),e(".attr-second-wrap").find('[data-attr-id="'+r+'"]').addClass("cur")},closeAttr:function(){e(".overlay").hide(),e(".filter,.filter-sub").removeClass("active"),e(".attr-second").removeClass("cur")},closeSubAttr:function(t){e(".filter-sub").removeClass("active"),t.parent().removeClass("cur")},selectOption:function(t){var n=e(t.currentTarget),r=n.parent().data("attr-id"),i={"data-option-id":n.data("option-id"),"data-option-name":n.text()};n.addClass("cur").siblings().removeClass("cur"),e('.attr-first-li[data-attr-id="'+r+'"]').attr(i).find(".select-sub").text(i["data-option-name"]),this.closeSubAttr(n)}}),n}),define("view/detail/goodsList",["common","view/base","view/widget/endless","view/detail/attrPanel"],function(e,t){var n=e.util.inherit(t);return e.extend(n.prototype,{initialize:function(){}}),n}),define("text!tpl/detail/goods.mustache",[],function(){return'{{#list}}\r\n    <li id="S-{{sku}}" data-id="{{sku}}" class="pd-item-li" data-lazy="true">\r\n        <a href="\r\n        openApp.jdMobile://virtual?params={\'category\':\'jump\',\'des\':\'productDetail\',\'skuId\':\'{{sku}}\',\'sourceType\':\'h5jingxuan\',\'sourceValue\':\'brand\'}\r\n" class="pd-item" data-sku="{{sku}}">\r\n            <div class="pd-pic">\r\n                <i class="pd-icon"><span class="sales-count">æé{{sales}}<em>+</em></span></i>\r\n                {{#imageUrl}}\r\n                    <img class="pd-img" data-src="http://img30.360buyimg.com/n3/{{imageUrl}}" width="100%" alt="">\r\n                {{/imageUrl}}\r\n\r\n                {{^imageUrl}}\r\n                <img class="pd-img" data-src="../img/default.jpg" width="100%" alt="">\r\n                {{/imageUrl}}\r\n\r\n            </div>\r\n            <div class="pd-title">{{name}}</div>\r\n            <div class="pd-price">\r\n                <span class="pd-price-num"><em class="price-unit">Â¥</em>{{price}}</span>\r\n            </div>\r\n            <div class="feedback">\r\n                <span class="num">å·²æ{{comments}}äººè¯ä»·</span>\r\n            </div>\r\n        </a>\r\n    </li>\r\n{{/list}}\r\n{{^list}}\r\n    <div class="pd-item-li-nodata">\r\n        <span>ææ¶æªæ¾å°ç¸å³æ°æ®</span>\r\n    </div>\r\n{{/list}}\r\n'}),define("text!tpl/detail/attrPanel.mustache",[],function(){return'<div class="filter-main">\r\n    <div class="hd">\r\n        <span class="title">ç­é</span>\r\n        <a id="J_AttrBtn" href="javascript:;" class="btn-opt">ç¡®å®</a>\r\n    </div>\r\n    <div class="filter-list">\r\n        <ul class="attr-first">\r\n                {{#propList}}\r\n                    <li class="attr-first-li" data-attr-id="{{property.propertyId}}" data-attr-name="{{property.propertyName}}" data-option-name="" data-option-id="">\r\n\r\n                        <h4>{{property.propertyName}}</h4>\r\n                        <span class="select-sub">å¨é¨</span>\r\n                    </li>\r\n                {{/propList}}\r\n        </ul>\r\n    </div>\r\n</div>\r\n<div class="filter-sub">\r\n    <div class="hd">\r\n        <span class="title">ç­é</span>\r\n        <!--<a href="javascript:;" class="btn-opt">ç¡®å®</a>-->\r\n    </div>\r\n    <div class="filter-list attr-second-wrap">\r\n\r\n            {{#propList}}\r\n                <ul class="attr-second" data-attr-id="{{property.propertyId}}" data-type="single">\r\n                    <li class="attr-sec-li cur" data-option-id=""><h4>å¨é¨</h4></li>\r\n                    {{#values}}\r\n                        <li class="attr-sec-li" data-option-id="{{valueId}}">\r\n                            <h4>{{valueName}}</h4>\r\n                        </li>\r\n                    {{/values}}\r\n                </ul>\r\n            {{/propList}}\r\n\r\n    </div>\r\n</div>\r\n'}),define("app/detail/goodsList",["common","common/store","model/accessorie","view/detail/goodsList","view/detail/attrPanel","text!tpl/detail/goods.mustache","text!tpl/detail/attrPanel.mustache","util","view/widget/alert"],function(e,t,n,r,i,o,a,s,c){return{init:function(t,u){function l(t){e.each(t.list,function(e,n){t.list[e].price=s.formatPrice(n.price),t.list[e].sales=s.formatSales(n.sales)}),k.render(t,"#goods-list")}function f(t){t.preventDefault();var n,r,i=e(t.currentTarget),o=i.attr("data-acc-id"),a=k.reqData.sku;return i.hasClass("cur")?!1:i.hasClass("menu-item-acc-all")?void b(a):(n=e.extend(k.reqData,{thirdTypeId:o,pageNo:1,condition:"",priceCondition:""}),r={sku:a,thirdTypeId:o},spinner&&spinner.start(),k.model.goodsList(n).done(function(t){l(t.resultQuery),k.model.attrPanel(r).done(function(t){e(".menu-item-acc").filter(".cur").removeClass("cur"),i.addClass("cur"),e("#menu-trigger-acc").attr("data-acc",t.thirdTypeId),e("#menu-trigger-acc").trigger("close").find("span").html(t.thirdTypeName),E.render(t)})}).fail(function(){(new c).render({msg:"ç½ç»ä¸ç¨³å®ï¼ä¼æ¯ä¸ä¸ï¼ç¨åè¯è¯~"})}),void ping.click({report_eventid:"Accessory_Category",report_eventparam:o}))}function d(t){t.preventDefault();var n,r,i=e(t.currentTarget),o=i.parents(".item-brand"),a=i.attr("data-sku"),s=i.text(),u=k.reqData.thirdTypeId,f=o.find(".select-sub");
return i.hasClass("cur")?!1:(n=e.extend(k.reqData,{sku:a,pageNo:1,condition:"",priceCondition:""}),r={sku:a,thirdTypeId:u},spinner&&spinner.start(),void k.model.goodsList(n).done(function(t){l(t.resultQuery),k.model.attrPanel(r).done(function(t){i.addClass("cur"),o.removeClass("cur").addClass("item-selected").attr("data-sku",a).siblings().attr("data-sku","").removeClass("item-selected"),e(".menu-trigger-model").attr("data-sku",a),f.html(i.html()),e("#menu-trigger-model").trigger("close").attr("data-sku",a).find("span").html(s),E.render(t)})}).fail(function(){(new c).render({msg:"ç½ç»ä¸ç¨³å®ï¼ä¼æ¯ä¸ä¸ï¼ç¨åè¯è¯~"})}))}function p(t){var n=e(t.currentTarget);if(n.hasClass("sorting-current"))return!1;spinner&&spinner.start();var r=n.attr("data-column"),i=e.extend(k.reqData,{column:r,pageNo:1});switch(k.fill="",k.model.goodsList(i).done(function(e){l(e.resultQuery),n.addClass("sorting-current").siblings().removeClass("sorting-current")}).fail(function(){spinner&&spinner.stop(),(new c).render({msg:"ç½ç»ä¸ç¨³å®ï¼ä¼æ¯ä¸ä¸ï¼ç¨åè¯è¯~"})}),r){case 0:ping.click({report_eventid:"AccessoryDetail_SortbyAmount"});break;case 2:ping.click({report_eventid:"AccessoryDetail_SortbyEvaluate"});break;case 1:ping.click({report_eventid:"AccessoryDetail_SortbyPrice"});break;case 3:ping.click({report_eventid:"AccessoryDetail_SortbyNew"})}return!1}function h(t){spinner&&spinner.start();var n=(e(t.currentTarget),[]),r="",i=k.reqData;return k.fill="",e(".attr-first-li").each(function(t,i){var o,a=e(i),s=a.attr("data-attr-name"),c=a.attr("data-attr-id"),u=a.attr("data-option-id");if(u)if("ä»·æ ¼"!=s){var l=c+":"+u;n.push(l)}else o=e.trim(a.attr("data-option-name")),-1!=o.indexOf("ä»¥ä¸")&&(o=o.replace("ä»¥ä¸","max")),r=o}),n=n.join(";"),e.extend(i,{condition:n,priceCondition:r,pageNo:1}),k.model.goodsList(i).done(function(t){l(t.resultQuery),e("#J_AttrPane").trigger("close"),""!=n||""!=r?e("#J_AttrTrigger").addClass("cur"):e("#J_AttrTrigger").removeClass("cur")}).fail(function(){e("#J_AttrPane").trigger("close"),(new c).render({msg:"ç½ç»ä¸ç¨³å®ï¼ä¼æ¯ä¸ä¸ï¼ç¨åè¯è¯~"})}),ping.click({report_eventid:"Accessory_Filter"}),!1}function m(e){var t=u.scrollY,n=e.offsetTop,r=e.offsetHeight,i=u.innerHeight,o=t,a=t+i;return n+r>o&&a>n?!0:!1}function g(){j||(j=!0,k.reqData.pageNo+=1,k.fill="after",x.goodsList(t).done(function(e){if("object"==typeof e)l(e.resultQuery),j=!1;else{var t=new alertView;t.render({msg:e.msg})}}).fail(function(){(new c).render({msg:"ç½ç»ä¸ç¨³å®ï¼ä¼æ¯ä¸ä¸ï¼ç¨åè¯è¯~"})}))}function v(){var t=e('.pd-item-li[data-lazy="true"]');t.each(function(t,n){if(m(n)){var r=e(n).find("img")[0],i=r.getAttribute("data-src");e(n).attr("data-lazy","false");var o=function(){var e,t;return e=r,t=i,function(){e.src=t,e.style.opacity=1}}(),a=new Image;a.onload=o,a.src=i}})}function y(e,t){return t||P!=u.scrollY?(P=u.scrollY,O=u.scrollY,T=u.innerHeight,_=O-1e3,S=O+T+1e3,u.scrollY+T+600>document.body.offsetHeight&&k.reqData.pageNo<k.pageTotal&&g(),v(),void(C=u.setTimeout(y,100))):void(C=u.setTimeout(y,100))}function b(e){var t=location.href;t=t.substring(0,t.indexOf("?")),e&&(t=t.replace("detail","index"),t+="?sku="+e),location=t}var w=e.util.Deferred(),x=new n,k=new r({model:x,el:"#search-cntr",tpl:{goods:o}}),E=new i({model:x,el:"#J_AttrPane",tpl:{attrPanel:a}});k.afterRender=function(t){var n=this.reqData.column;return this.pageTotal=t.allPageNo,this.pageNo=t.currentPageNo,0==n?e(".pd-item").parent().each(function(t,n){return 3>t?void e(n).addClass("show-salenum-icon").removeClass("show-cmt-icon"):!1}):2==n&&e(".pd-item").parent().each(function(t,n){return 3>t?void e(n).addClass("show-cmt-icon").removeClass("show-salenum-icon"):!1}),clearTimeout(C),y(null,!0),this};var C,T,_,S,j=!1,P=u.pageYOffset,O=u.pageYOffset;return k.reqData=t,x.goodsList(t).done(function(e){return e.resultQuery?(l(e.resultQuery),w.resolve(e)):((new c).render({msg:"ç½ç»ä¸ç¨³å®ï¼ä¼æ¯ä¸ä¸ï¼ç¨åè¯è¯~"}),w.reject(e))}).fail(function(){return(new c).render({msg:"ç½ç»ä¸ç¨³å®ï¼ä¼æ¯ä¸ä¸ï¼ç¨åè¯è¯~"}),w.reject()}),e(document).on("click","#J_AttrBtn",h),e(document).on("click",".sroting-btn",p),e(document).on("click",".tag-model",d),e(document).on("click",".menu-item-acc",f),e(document).on("click",".pd-item",function(){var t=e(this).attr("data-sku");ping.click({report_eventid:"Accessory_Productid",report_eventparam:t})}),C=u.setTimeout(y,100),w.promise()}}}),define("app/detail/attrPanel",["common","common/store","model/accessorie","view/detail/attrPanel","text!tpl/detail/attrPanel.mustache","view/widget/alert"],function(e,t,n,r,i){return{init:function(t){var o=e.util.Deferred(),a=new n,s=new r({model:a,el:"#J_AttrPane",tpl:{attrPanel:i}});return a.attrPanel(t).done(function(e){return s.render(e),o.resolve(e)}).fail(function(){return o.reject()}),o.promise()}}}),define("app/detail",["common","util","app/index/toolBar","app/detail/goodsList","app/detail/attrPanel"],function(e,t,n,r,i){FastClick.attach(document.body);var o={},a=e.url.getParam("sku"),s=e.url.getParam("thirdTypeId");o.sku=a,o.thirdTypeId=s;var c={};c.pageNo=1,c.thirdTypeId=s,c.sku=a,c.brandId="",c.column=0,c.sp="asc",c.condition="",c.priceCondition="",routie({"":function(){document.title="éä»¶ä¸­å¿";var e={},t={};i.init(o).done(function(r){e.style=r.productMap.style?r.productMap.style:r.productMap.name,e.brand=r.productMap.brand,e.sku=r.productMap.sku,t.accId=r.thirdTypeId,t.accName=r.thirdTypeName,n.init(e,t)}),r.init(c,window).done(function(){})}})});